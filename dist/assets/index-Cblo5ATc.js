(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var tc={exports:{}},mi={},nc={exports:{}},I={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Gh=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),tf=Symbol.for("react.suspense"),nf=Symbol.for("react.memo"),rf=Symbol.for("react.lazy"),bl=Symbol.iterator;function sf(t){return t===null||typeof t!="object"?null:(t=bl&&t[bl]||t["@@iterator"],typeof t=="function"?t:null)}var rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sc=Object.assign,ic={};function Gn(t,e,n){this.props=t,this.context=e,this.refs=ic,this.updater=n||rc}Gn.prototype.isReactComponent={};Gn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oc(){}oc.prototype=Gn.prototype;function ba(t,e,n){this.props=t,this.context=e,this.refs=ic,this.updater=n||rc}var ja=ba.prototype=new oc;ja.constructor=ba;sc(ja,Gn.prototype);ja.isPureReactComponent=!0;var jl=Array.isArray,ac=Object.prototype.hasOwnProperty,Sa={current:null},lc={key:!0,ref:!0,__self:!0,__source:!0};function uc(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ac.call(e,r)&&!lc.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Yr,type:t,key:i,ref:o,props:s,_owner:Sa.current}}function of(t,e){return{$$typeof:Yr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Na(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yr}function af(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sl=/\/+/g;function Ii(t,e){return typeof t=="object"&&t!==null&&t.key!=null?af(""+t.key):e.toString(36)}function Cs(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yr:case Qh:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ii(o,0):r,jl(s)?(n="",t!=null&&(n=t.replace(Sl,"$&/")+"/"),Cs(s,e,n,"",function(c){return c})):s!=null&&(Na(s)&&(s=of(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sl,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",jl(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ii(i,l);o+=Cs(i,e,n,u,s)}else if(u=sf(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ii(i,l++),o+=Cs(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function as(t,e,n){if(t==null)return t;var r=[],s=0;return Cs(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xe={current:null},Ps={transition:null},uf={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:Sa};function cc(){throw Error("act(...) is not supported in production builds of React.")}I.Children={map:as,forEach:function(t,e,n){as(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return as(t,function(){e++}),e},toArray:function(t){return as(t,function(e){return e})||[]},only:function(t){if(!Na(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};I.Component=Gn;I.Fragment=Gh;I.Profiler=Yh;I.PureComponent=ba;I.StrictMode=Jh;I.Suspense=tf;I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uf;I.act=cc;I.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sc({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Sa.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ac.call(e,u)&&!lc.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Yr,type:t.type,key:s,ref:i,props:r,_owner:o}};I.createContext=function(t){return t={$$typeof:Zh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xh,_context:t},t.Consumer=t};I.createElement=uc;I.createFactory=function(t){var e=uc.bind(null,t);return e.type=t,e};I.createRef=function(){return{current:null}};I.forwardRef=function(t){return{$$typeof:ef,render:t}};I.isValidElement=Na;I.lazy=function(t){return{$$typeof:rf,_payload:{_status:-1,_result:t},_init:lf}};I.memo=function(t,e){return{$$typeof:nf,type:t,compare:e===void 0?null:e}};I.startTransition=function(t){var e=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=e}};I.unstable_act=cc;I.useCallback=function(t,e){return xe.current.useCallback(t,e)};I.useContext=function(t){return xe.current.useContext(t)};I.useDebugValue=function(){};I.useDeferredValue=function(t){return xe.current.useDeferredValue(t)};I.useEffect=function(t,e){return xe.current.useEffect(t,e)};I.useId=function(){return xe.current.useId()};I.useImperativeHandle=function(t,e,n){return xe.current.useImperativeHandle(t,e,n)};I.useInsertionEffect=function(t,e){return xe.current.useInsertionEffect(t,e)};I.useLayoutEffect=function(t,e){return xe.current.useLayoutEffect(t,e)};I.useMemo=function(t,e){return xe.current.useMemo(t,e)};I.useReducer=function(t,e,n){return xe.current.useReducer(t,e,n)};I.useRef=function(t){return xe.current.useRef(t)};I.useState=function(t){return xe.current.useState(t)};I.useSyncExternalStore=function(t,e,n){return xe.current.useSyncExternalStore(t,e,n)};I.useTransition=function(){return xe.current.useTransition()};I.version="18.3.1";nc.exports=I;var E=nc.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf=E,df=Symbol.for("react.element"),hf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,pf=cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mf={key:!0,ref:!0,__self:!0,__source:!0};function dc(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ff.call(e,r)&&!mf.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:df,type:t,key:i,ref:o,props:s,_owner:pf.current}}mi.Fragment=hf;mi.jsx=dc;mi.jsxs=dc;tc.exports=mi;var a=tc.exports,hc={exports:{}},Oe={},fc={exports:{}},pc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,z){var A=P.length;P.push(z);e:for(;0<A;){var Q=A-1>>>1,ee=P[Q];if(0<s(ee,z))P[Q]=z,P[A]=ee,A=Q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],A=P.pop();if(A!==z){P[0]=A;e:for(var Q=0,ee=P.length,dn=ee>>>1;Q<dn;){var U=2*(Q+1)-1,ze=P[U],Be=U+1,hn=P[Be];if(0>s(ze,A))Be<ee&&0>s(hn,ze)?(P[Q]=hn,P[Be]=A,Q=Be):(P[Q]=ze,P[U]=A,Q=U);else if(Be<ee&&0>s(hn,A))P[Q]=hn,P[Be]=A,Q=Be;else break e}}return z}function s(P,z){var A=P.sortIndex-z.sortIndex;return A!==0?A:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,p=3,y=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=P)r(c),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(c)}}function x(P){if(w=!1,m(P),!v)if(n(u)!==null)v=!0,tr(S);else{var z=n(c);z!==null&&nr(x,z.startTime-P)}}function S(P,z){v=!1,w&&(w=!1,g(C),C=-1),y=!0;var A=p;try{for(m(z),h=n(u);h!==null&&(!(h.expirationTime>z)||P&&!D());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var ee=Q(h.expirationTime<=z);z=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(u)&&r(u),m(z)}else r(u);h=n(u)}if(h!==null)var dn=!0;else{var U=n(c);U!==null&&nr(x,U.startTime-z),dn=!1}return dn}finally{h=null,p=A,y=!1}}var k=!1,_=null,C=-1,O=5,N=-1;function D(){return!(t.unstable_now()-N<O)}function Ae(){if(_!==null){var P=t.unstable_now();N=P;var z=!0;try{z=_(!0,P)}finally{z?me():(k=!1,_=null)}}else k=!1}var me;if(typeof f=="function")me=function(){f(Ae)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,ot=xt.port2;xt.port1.onmessage=Ae,me=function(){ot.postMessage(null)}}else me=function(){b(Ae,0)};function tr(P){_=P,k||(k=!0,me())}function nr(P,z){C=b(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,tr(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var A=p;p=z;try{return P()}finally{p=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var A=p;p=P;try{return z()}finally{p=A}},t.unstable_scheduleCallback=function(P,z,A){var Q=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?Q+A:Q):A=Q,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=A+ee,P={id:d++,callback:z,priorityLevel:P,startTime:A,expirationTime:ee,sortIndex:-1},A>Q?(P.sortIndex=A,e(c,P),n(u)===null&&P===n(c)&&(w?(g(C),C=-1):w=!0,nr(x,A-Q))):(P.sortIndex=ee,e(u,P),v||y||(v=!0,tr(S))),P},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(P){var z=p;return function(){var A=p;p=z;try{return P.apply(this,arguments)}finally{p=A}}}})(pc);fc.exports=pc;var gf=fc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=E,Te=gf;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mc=new Set,Or={};function ln(t,e){Dn(t,e),Dn(t+"Capture",e)}function Dn(t,e){for(Or[t]=e,t=0;t<e.length;t++)mc.add(e[t])}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=Object.prototype.hasOwnProperty,vf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nl={},El={};function xf(t){return vo.call(El,t)?!0:vo.call(Nl,t)?!1:vf.test(t)?El[t]=!0:(Nl[t]=!0,!1)}function wf(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _f(t,e,n,r){if(e===null||typeof e>"u"||wf(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function we(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ce[t]=new we(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ce[e]=new we(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ce[t]=new we(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ce[t]=new we(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ce[t]=new we(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ce[t]=new we(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ce[t]=new we(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ce[t]=new we(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ce[t]=new we(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ea=/[\-:]([a-z])/g;function Ca(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ea,Ca);ce[e]=new we(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ea,Ca);ce[e]=new we(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ea,Ca);ce[e]=new we(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ce[t]=new we(t,1,!1,t.toLowerCase(),null,!1,!1)});ce.xlinkHref=new we("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ce[t]=new we(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pa(t,e,n,r){var s=ce.hasOwnProperty(e)?ce[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_f(e,n,s,r)&&(n=null),r||s===null?xf(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vt=yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ls=Symbol.for("react.element"),kn=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),Ta=Symbol.for("react.strict_mode"),xo=Symbol.for("react.profiler"),gc=Symbol.for("react.provider"),yc=Symbol.for("react.context"),Oa=Symbol.for("react.forward_ref"),wo=Symbol.for("react.suspense"),_o=Symbol.for("react.suspense_list"),Ra=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),vc=Symbol.for("react.offscreen"),Cl=Symbol.iterator;function rr(t){return t===null||typeof t!="object"?null:(t=Cl&&t[Cl]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,Ui;function hr(t){if(Ui===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ui=e&&e[1]||""}return`
`+Ui+t}var Mi=!1;function Di(t,e){if(!t||Mi)return"";Mi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Mi=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hr(t):""}function kf(t){switch(t.tag){case 5:return hr(t.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 2:case 15:return t=Di(t.type,!1),t;case 11:return t=Di(t.type.render,!1),t;case 1:return t=Di(t.type,!0),t;default:return""}}function ko(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bn:return"Fragment";case kn:return"Portal";case xo:return"Profiler";case Ta:return"StrictMode";case wo:return"Suspense";case _o:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yc:return(t.displayName||"Context")+".Consumer";case gc:return(t._context.displayName||"Context")+".Provider";case Oa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ra:return e=t.displayName||null,e!==null?e:ko(t.type)||"Memo";case bt:e=t._payload,t=t._init;try{return ko(t(e))}catch{}}return null}function bf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ko(e);case 8:return e===Ta?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ut(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jf(t){var e=xc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function us(t){t._valueTracker||(t._valueTracker=jf(t))}function wc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xc(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bo(t,e){var n=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pl(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ut(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _c(t,e){e=e.checked,e!=null&&Pa(t,"checked",e,!1)}function jo(t,e){_c(t,e);var n=Ut(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?So(t,e.type,n):e.hasOwnProperty("defaultValue")&&So(t,e.type,Ut(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function So(t,e,n){(e!=="number"||Ds(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fr=Array.isArray;function zn(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ut(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function No(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ol(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(fr(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ut(n)}}function kc(t,e){var n=Ut(e.value),r=Ut(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cs,jc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sf=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(t){Sf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yr[e]=yr[t]})});function Sc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yr.hasOwnProperty(t)&&yr[t]?(""+e).trim():e+"px"}function Nc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Sc(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Nf=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(t,e){if(e){if(Nf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Po(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=null;function Aa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oo=null,$n=null,Ln=null;function Al(t){if(t=es(t)){if(typeof Oo!="function")throw Error(j(280));var e=t.stateNode;e&&(e=wi(e),Oo(t.stateNode,t.type,e))}}function Ec(t){$n?Ln?Ln.push(t):Ln=[t]:$n=t}function Cc(){if($n){var t=$n,e=Ln;if(Ln=$n=null,Al(t),e)for(t=0;t<e.length;t++)Al(e[t])}}function Pc(t,e){return t(e)}function Tc(){}var Fi=!1;function Oc(t,e,n){if(Fi)return t(e,n);Fi=!0;try{return Pc(t,e,n)}finally{Fi=!1,($n!==null||Ln!==null)&&(Tc(),Cc())}}function Ar(t,e){var n=t.stateNode;if(n===null)return null;var r=wi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Ro=!1;if(pt)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Ro=!1}function Ef(t,e,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var vr=!1,Fs=null,Bs=!1,Ao=null,Cf={onError:function(t){vr=!0,Fs=t}};function Pf(t,e,n,r,s,i,o,l,u){vr=!1,Fs=null,Ef.apply(Cf,arguments)}function Tf(t,e,n,r,s,i,o,l,u){if(Pf.apply(this,arguments),vr){if(vr){var c=Fs;vr=!1,Fs=null}else throw Error(j(198));Bs||(Bs=!0,Ao=c)}}function un(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zl(t){if(un(t)!==t)throw Error(j(188))}function Of(t){var e=t.alternate;if(!e){if(e=un(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zl(s),t;if(i===r)return zl(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Ac(t){return t=Of(t),t!==null?zc(t):null}function zc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zc(t);if(e!==null)return e;t=t.sibling}return null}var $c=Te.unstable_scheduleCallback,$l=Te.unstable_cancelCallback,Rf=Te.unstable_shouldYield,Af=Te.unstable_requestPaint,Z=Te.unstable_now,zf=Te.unstable_getCurrentPriorityLevel,za=Te.unstable_ImmediatePriority,Lc=Te.unstable_UserBlockingPriority,Vs=Te.unstable_NormalPriority,$f=Te.unstable_LowPriority,Ic=Te.unstable_IdlePriority,gi=null,nt=null;function Lf(t){if(nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ge=Math.clz32?Math.clz32:Mf,If=Math.log,Uf=Math.LN2;function Mf(t){return t>>>=0,t===0?32:31-(If(t)/Uf|0)|0}var ds=64,hs=4194304;function pr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pr(l):(i&=o,i!==0&&(r=pr(i)))}else o=n&~s,o!==0?r=pr(o):i!==0&&(r=pr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ge(e),s=1<<n,r|=t[n],e&=~s;return r}function Df(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ff(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ge(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Df(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function zo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uc(){var t=ds;return ds<<=1,!(ds&4194240)&&(ds=64),t}function Bi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ge(e),t[e]=n}function Bf(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ge(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $a(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ge(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var B=0;function Mc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dc,La,Fc,Bc,Vc,$o=!1,fs=[],Tt=null,Ot=null,Rt=null,zr=new Map,$r=new Map,St=[],Vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(t,e){switch(t){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":zr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(e.pointerId)}}function ir(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=es(e),e!==null&&La(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hf(t,e,n,r,s){switch(e){case"focusin":return Tt=ir(Tt,t,e,n,r,s),!0;case"dragenter":return Ot=ir(Ot,t,e,n,r,s),!0;case"mouseover":return Rt=ir(Rt,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return zr.set(i,ir(zr.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$r.set(i,ir($r.get(i)||null,t,e,n,r,s)),!0}return!1}function Hc(t){var e=Yt(t.target);if(e!==null){var n=un(e);if(n!==null){if(e=n.tag,e===13){if(e=Rc(n),e!==null){t.blockedOn=e,Vc(t.priority,function(){Fc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ts(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);To=r,n.target.dispatchEvent(r),To=null}else return e=es(n),e!==null&&La(e),t.blockedOn=n,!1;e.shift()}return!0}function Il(t,e,n){Ts(t)&&n.delete(e)}function qf(){$o=!1,Tt!==null&&Ts(Tt)&&(Tt=null),Ot!==null&&Ts(Ot)&&(Ot=null),Rt!==null&&Ts(Rt)&&(Rt=null),zr.forEach(Il),$r.forEach(Il)}function or(t,e){t.blockedOn===e&&(t.blockedOn=null,$o||($o=!0,Te.unstable_scheduleCallback(Te.unstable_NormalPriority,qf)))}function Lr(t){function e(s){return or(s,t)}if(0<fs.length){or(fs[0],t);for(var n=1;n<fs.length;n++){var r=fs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tt!==null&&or(Tt,t),Ot!==null&&or(Ot,t),Rt!==null&&or(Rt,t),zr.forEach(e),$r.forEach(e),n=0;n<St.length;n++)r=St[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<St.length&&(n=St[0],n.blockedOn===null);)Hc(n),n.blockedOn===null&&St.shift()}var In=vt.ReactCurrentBatchConfig,qs=!0;function Wf(t,e,n,r){var s=B,i=In.transition;In.transition=null;try{B=1,Ia(t,e,n,r)}finally{B=s,In.transition=i}}function Kf(t,e,n,r){var s=B,i=In.transition;In.transition=null;try{B=4,Ia(t,e,n,r)}finally{B=s,In.transition=i}}function Ia(t,e,n,r){if(qs){var s=Lo(t,e,n,r);if(s===null)Xi(t,e,r,Ws,n),Ll(t,r);else if(Hf(s,t,e,n,r))r.stopPropagation();else if(Ll(t,r),e&4&&-1<Vf.indexOf(t)){for(;s!==null;){var i=es(s);if(i!==null&&Dc(i),i=Lo(t,e,n,r),i===null&&Xi(t,e,r,Ws,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xi(t,e,r,null,n)}}var Ws=null;function Lo(t,e,n,r){if(Ws=null,t=Aa(r),t=Yt(t),t!==null)if(e=un(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ws=t,null}function qc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zf()){case za:return 1;case Lc:return 4;case Vs:case $f:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var Ct=null,Ua=null,Os=null;function Wc(){if(Os)return Os;var t,e=Ua,n=e.length,r,s="value"in Ct?Ct.value:Ct.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Os=s.slice(t,1<r?1-r:void 0)}function Rs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ps(){return!0}function Ul(){return!1}function Re(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ps:Ul,this.isPropagationStopped=Ul,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),e}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Re(Jn),Zr=Y({},Jn,{view:0,detail:0}),Qf=Re(Zr),Vi,Hi,ar,yi=Y({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ar&&(ar&&t.type==="mousemove"?(Vi=t.screenX-ar.screenX,Hi=t.screenY-ar.screenY):Hi=Vi=0,ar=t),Vi)},movementY:function(t){return"movementY"in t?t.movementY:Hi}}),Ml=Re(yi),Gf=Y({},yi,{dataTransfer:0}),Jf=Re(Gf),Yf=Y({},Zr,{relatedTarget:0}),qi=Re(Yf),Xf=Y({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zf=Re(Xf),ep=Y({},Jn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tp=Re(ep),np=Y({},Jn,{data:0}),Dl=Re(np),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ip[t])?!!e[t]:!1}function Da(){return op}var ap=Y({},Zr,{key:function(t){if(t.key){var e=rp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lp=Re(ap),up=Y({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Re(up),cp=Y({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),dp=Re(cp),hp=Y({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fp=Re(hp),pp=Y({},yi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mp=Re(pp),gp=[9,13,27,32],Fa=pt&&"CompositionEvent"in window,xr=null;pt&&"documentMode"in document&&(xr=document.documentMode);var yp=pt&&"TextEvent"in window&&!xr,Kc=pt&&(!Fa||xr&&8<xr&&11>=xr),Bl=" ",Vl=!1;function Qc(t,e){switch(t){case"keyup":return gp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function vp(t,e){switch(t){case"compositionend":return Gc(e);case"keypress":return e.which!==32?null:(Vl=!0,Bl);case"textInput":return t=e.data,t===Bl&&Vl?null:t;default:return null}}function xp(t,e){if(jn)return t==="compositionend"||!Fa&&Qc(t,e)?(t=Wc(),Os=Ua=Ct=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kc&&e.locale!=="ko"?null:e.data;default:return null}}var wp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wp[t.type]:e==="textarea"}function Jc(t,e,n,r){Ec(r),e=Ks(e,"onChange"),0<e.length&&(n=new Ma("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wr=null,Ir=null;function _p(t){ad(t,0)}function vi(t){var e=En(t);if(wc(e))return t}function kp(t,e){if(t==="change")return e}var Yc=!1;if(pt){var Wi;if(pt){var Ki="oninput"in document;if(!Ki){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),Ki=typeof ql.oninput=="function"}Wi=Ki}else Wi=!1;Yc=Wi&&(!document.documentMode||9<document.documentMode)}function Wl(){wr&&(wr.detachEvent("onpropertychange",Xc),Ir=wr=null)}function Xc(t){if(t.propertyName==="value"&&vi(Ir)){var e=[];Jc(e,Ir,t,Aa(t)),Oc(_p,e)}}function bp(t,e,n){t==="focusin"?(Wl(),wr=e,Ir=n,wr.attachEvent("onpropertychange",Xc)):t==="focusout"&&Wl()}function jp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vi(Ir)}function Sp(t,e){if(t==="click")return vi(e)}function Np(t,e){if(t==="input"||t==="change")return vi(e)}function Ep(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ye=typeof Object.is=="function"?Object.is:Ep;function Ur(t,e){if(Ye(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vo.call(e,s)||!Ye(t[s],e[s]))return!1}return!0}function Kl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ql(t,e){var n=Kl(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kl(n)}}function Zc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ed(){for(var t=window,e=Ds();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ds(t.document)}return e}function Ba(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cp(t){var e=ed(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zc(n.ownerDocument.documentElement,n)){if(r!==null&&Ba(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ql(n,i);var o=Ql(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pp=pt&&"documentMode"in document&&11>=document.documentMode,Sn=null,Io=null,_r=null,Uo=!1;function Gl(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uo||Sn==null||Sn!==Ds(r)||(r=Sn,"selectionStart"in r&&Ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_r&&Ur(_r,r)||(_r=r,r=Ks(Io,"onSelect"),0<r.length&&(e=new Ma("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sn)))}function ms(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nn={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},Qi={},td={};pt&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);function xi(t){if(Qi[t])return Qi[t];if(!Nn[t])return t;var e=Nn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in td)return Qi[t]=e[n];return t}var nd=xi("animationend"),rd=xi("animationiteration"),sd=xi("animationstart"),id=xi("transitionend"),od=new Map,Jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ft(t,e){od.set(t,e),ln(e,[t])}for(var Gi=0;Gi<Jl.length;Gi++){var Ji=Jl[Gi],Tp=Ji.toLowerCase(),Op=Ji[0].toUpperCase()+Ji.slice(1);Ft(Tp,"on"+Op)}Ft(nd,"onAnimationEnd");Ft(rd,"onAnimationIteration");Ft(sd,"onAnimationStart");Ft("dblclick","onDoubleClick");Ft("focusin","onFocus");Ft("focusout","onBlur");Ft(id,"onTransitionEnd");Dn("onMouseEnter",["mouseout","mouseover"]);Dn("onMouseLeave",["mouseout","mouseover"]);Dn("onPointerEnter",["pointerout","pointerover"]);Dn("onPointerLeave",["pointerout","pointerover"]);ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(mr));function Yl(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tf(r,e,void 0,t),t.currentTarget=null}function ad(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Yl(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Yl(s,l,c),i=u}}}if(Bs)throw t=Ao,Bs=!1,Ao=null,t}function q(t,e){var n=e[Vo];n===void 0&&(n=e[Vo]=new Set);var r=t+"__bubble";n.has(r)||(ld(e,t,2,!1),n.add(r))}function Yi(t,e,n){var r=0;e&&(r|=4),ld(n,t,r,e)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Mr(t){if(!t[gs]){t[gs]=!0,mc.forEach(function(n){n!=="selectionchange"&&(Rp.has(n)||Yi(n,!1,t),Yi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gs]||(e[gs]=!0,Yi("selectionchange",!1,e))}}function ld(t,e,n,r){switch(qc(e)){case 1:var s=Wf;break;case 4:s=Kf;break;default:s=Ia}n=s.bind(null,e,n,t),s=void 0,!Ro||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xi(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Yt(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Oc(function(){var c=i,d=Aa(n),h=[];e:{var p=od.get(t);if(p!==void 0){var y=Ma,v=t;switch(t){case"keypress":if(Rs(n)===0)break e;case"keydown":case"keyup":y=lp;break;case"focusin":v="focus",y=qi;break;case"focusout":v="blur",y=qi;break;case"beforeblur":case"afterblur":y=qi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=dp;break;case nd:case rd:case sd:y=Zf;break;case id:y=fp;break;case"scroll":y=Qf;break;case"wheel":y=mp;break;case"copy":case"cut":case"paste":y=tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fl}var w=(e&4)!==0,b=!w&&t==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var f=c,m;f!==null;){m=f;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=Ar(f,g),x!=null&&w.push(Dr(f,x,m)))),b)break;f=f.return}0<w.length&&(p=new y(p,v,null,n,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==To&&(v=n.relatedTarget||n.fromElement)&&(Yt(v)||v[mt]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=c,v=v?Yt(v):null,v!==null&&(b=un(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(w=Ml,x="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(w=Fl,x="onPointerLeave",g="onPointerEnter",f="pointer"),b=y==null?p:En(y),m=v==null?p:En(v),p=new w(x,f+"leave",y,n,d),p.target=b,p.relatedTarget=m,x=null,Yt(d)===c&&(w=new w(g,f+"enter",v,n,d),w.target=m,w.relatedTarget=b,x=w),b=x,y&&v)t:{for(w=y,g=v,f=0,m=w;m;m=pn(m))f++;for(m=0,x=g;x;x=pn(x))m++;for(;0<f-m;)w=pn(w),f--;for(;0<m-f;)g=pn(g),m--;for(;f--;){if(w===g||g!==null&&w===g.alternate)break t;w=pn(w),g=pn(g)}w=null}else w=null;y!==null&&Xl(h,p,y,w,!1),v!==null&&b!==null&&Xl(h,b,v,w,!0)}}e:{if(p=c?En(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var S=kp;else if(Hl(p))if(Yc)S=Np;else{S=jp;var k=bp}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Sp);if(S&&(S=S(t,c))){Jc(h,S,n,d);break e}k&&k(t,p,c),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&So(p,"number",p.value)}switch(k=c?En(c):window,t){case"focusin":(Hl(k)||k.contentEditable==="true")&&(Sn=k,Io=c,_r=null);break;case"focusout":_r=Io=Sn=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,Gl(h,n,d);break;case"selectionchange":if(Pp)break;case"keydown":case"keyup":Gl(h,n,d)}var _;if(Fa)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else jn?Qc(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Kc&&n.locale!=="ko"&&(jn||C!=="onCompositionStart"?C==="onCompositionEnd"&&jn&&(_=Wc()):(Ct=d,Ua="value"in Ct?Ct.value:Ct.textContent,jn=!0)),k=Ks(c,C),0<k.length&&(C=new Dl(C,t,null,n,d),h.push({event:C,listeners:k}),_?C.data=_:(_=Gc(n),_!==null&&(C.data=_)))),(_=yp?vp(t,n):xp(t,n))&&(c=Ks(c,"onBeforeInput"),0<c.length&&(d=new Dl("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=_))}ad(h,e)})}function Dr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ks(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ar(t,n),i!=null&&r.unshift(Dr(t,i,s)),i=Ar(t,e),i!=null&&r.push(Dr(t,i,s))),t=t.return}return r}function pn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xl(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Ar(n,i),u!=null&&o.unshift(Dr(n,u,l))):s||(u=Ar(n,i),u!=null&&o.push(Dr(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ap=/\r\n?/g,zp=/\u0000|\uFFFD/g;function Zl(t){return(typeof t=="string"?t:""+t).replace(Ap,`
`).replace(zp,"")}function ys(t,e,n){if(e=Zl(e),Zl(t)!==e&&n)throw Error(j(425))}function Qs(){}var Mo=null,Do=null;function Fo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,$p=typeof clearTimeout=="function"?clearTimeout:void 0,eu=typeof Promise=="function"?Promise:void 0,Lp=typeof queueMicrotask=="function"?queueMicrotask:typeof eu<"u"?function(t){return eu.resolve(null).then(t).catch(Ip)}:Bo;function Ip(t){setTimeout(function(){throw t})}function Zi(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lr(e)}function At(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),tt="__reactFiber$"+Yn,Fr="__reactProps$"+Yn,mt="__reactContainer$"+Yn,Vo="__reactEvents$"+Yn,Up="__reactListeners$"+Yn,Mp="__reactHandles$"+Yn;function Yt(t){var e=t[tt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mt]||n[tt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tu(t);t!==null;){if(n=t[tt])return n;t=tu(t)}return e}t=n,n=t.parentNode}return null}function es(t){return t=t[tt]||t[mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function En(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function wi(t){return t[Fr]||null}var Ho=[],Cn=-1;function Bt(t){return{current:t}}function W(t){0>Cn||(t.current=Ho[Cn],Ho[Cn]=null,Cn--)}function H(t,e){Cn++,Ho[Cn]=t.current,t.current=e}var Mt={},pe=Bt(Mt),je=Bt(!1),nn=Mt;function Fn(t,e){var n=t.type.contextTypes;if(!n)return Mt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Se(t){return t=t.childContextTypes,t!=null}function Gs(){W(je),W(pe)}function nu(t,e,n){if(pe.current!==Mt)throw Error(j(168));H(pe,e),H(je,n)}function ud(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,bf(t)||"Unknown",s));return Y({},n,r)}function Js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mt,nn=pe.current,H(pe,t),H(je,je.current),!0}function ru(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=ud(t,e,nn),r.__reactInternalMemoizedMergedChildContext=t,W(je),W(pe),H(pe,t)):W(je),H(je,n)}var ct=null,_i=!1,eo=!1;function cd(t){ct===null?ct=[t]:ct.push(t)}function Dp(t){_i=!0,cd(t)}function Vt(){if(!eo&&ct!==null){eo=!0;var t=0,e=B;try{var n=ct;for(B=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ct=null,_i=!1}catch(s){throw ct!==null&&(ct=ct.slice(t+1)),$c(za,Vt),s}finally{B=e,eo=!1}}return null}var Pn=[],Tn=0,Ys=null,Xs=0,$e=[],Le=0,rn=null,dt=1,ht="";function Kt(t,e){Pn[Tn++]=Xs,Pn[Tn++]=Ys,Ys=t,Xs=e}function dd(t,e,n){$e[Le++]=dt,$e[Le++]=ht,$e[Le++]=rn,rn=t;var r=dt;t=ht;var s=32-Ge(r)-1;r&=~(1<<s),n+=1;var i=32-Ge(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,dt=1<<32-Ge(e)+s|n<<s|r,ht=i+t}else dt=1<<i|n<<s|r,ht=t}function Va(t){t.return!==null&&(Kt(t,1),dd(t,1,0))}function Ha(t){for(;t===Ys;)Ys=Pn[--Tn],Pn[Tn]=null,Xs=Pn[--Tn],Pn[Tn]=null;for(;t===rn;)rn=$e[--Le],$e[Le]=null,ht=$e[--Le],$e[Le]=null,dt=$e[--Le],$e[Le]=null}var Pe=null,Ce=null,K=!1,Qe=null;function hd(t,e){var n=Ie(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function su(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pe=t,Ce=At(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pe=t,Ce=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rn!==null?{id:dt,overflow:ht}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ie(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pe=t,Ce=null,!0):!1;default:return!1}}function qo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wo(t){if(K){var e=Ce;if(e){var n=e;if(!su(t,e)){if(qo(t))throw Error(j(418));e=At(n.nextSibling);var r=Pe;e&&su(t,e)?hd(r,n):(t.flags=t.flags&-4097|2,K=!1,Pe=t)}}else{if(qo(t))throw Error(j(418));t.flags=t.flags&-4097|2,K=!1,Pe=t}}}function iu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pe=t}function vs(t){if(t!==Pe)return!1;if(!K)return iu(t),K=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fo(t.type,t.memoizedProps)),e&&(e=Ce)){if(qo(t))throw fd(),Error(j(418));for(;e;)hd(t,e),e=At(e.nextSibling)}if(iu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ce=At(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ce=null}}else Ce=Pe?At(t.stateNode.nextSibling):null;return!0}function fd(){for(var t=Ce;t;)t=At(t.nextSibling)}function Bn(){Ce=Pe=null,K=!1}function qa(t){Qe===null?Qe=[t]:Qe.push(t)}var Fp=vt.ReactCurrentBatchConfig;function lr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function xs(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ou(t){var e=t._init;return e(t._payload)}function pd(t){function e(g,f){if(t){var m=g.deletions;m===null?(g.deletions=[f],g.flags|=16):m.push(f)}}function n(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=It(g,f),g.index=0,g.sibling=null,g}function i(g,f,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<f?(g.flags|=2,f):m):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,f,m,x){return f===null||f.tag!==6?(f=ao(m,g.mode,x),f.return=g,f):(f=s(f,m),f.return=g,f)}function u(g,f,m,x){var S=m.type;return S===bn?d(g,f,m.props.children,x,m.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bt&&ou(S)===f.type)?(x=s(f,m.props),x.ref=lr(g,f,m),x.return=g,x):(x=Ms(m.type,m.key,m.props,null,g.mode,x),x.ref=lr(g,f,m),x.return=g,x)}function c(g,f,m,x){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=lo(m,g.mode,x),f.return=g,f):(f=s(f,m.children||[]),f.return=g,f)}function d(g,f,m,x,S){return f===null||f.tag!==7?(f=tn(m,g.mode,x,S),f.return=g,f):(f=s(f,m),f.return=g,f)}function h(g,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ao(""+f,g.mode,m),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ls:return m=Ms(f.type,f.key,f.props,null,g.mode,m),m.ref=lr(g,null,f),m.return=g,m;case kn:return f=lo(f,g.mode,m),f.return=g,f;case bt:var x=f._init;return h(g,x(f._payload),m)}if(fr(f)||rr(f))return f=tn(f,g.mode,m,null),f.return=g,f;xs(g,f)}return null}function p(g,f,m,x){var S=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:l(g,f,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ls:return m.key===S?u(g,f,m,x):null;case kn:return m.key===S?c(g,f,m,x):null;case bt:return S=m._init,p(g,f,S(m._payload),x)}if(fr(m)||rr(m))return S!==null?null:d(g,f,m,x,null);xs(g,m)}return null}function y(g,f,m,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,l(f,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ls:return g=g.get(x.key===null?m:x.key)||null,u(f,g,x,S);case kn:return g=g.get(x.key===null?m:x.key)||null,c(f,g,x,S);case bt:var k=x._init;return y(g,f,m,k(x._payload),S)}if(fr(x)||rr(x))return g=g.get(m)||null,d(f,g,x,S,null);xs(f,x)}return null}function v(g,f,m,x){for(var S=null,k=null,_=f,C=f=0,O=null;_!==null&&C<m.length;C++){_.index>C?(O=_,_=null):O=_.sibling;var N=p(g,_,m[C],x);if(N===null){_===null&&(_=O);break}t&&_&&N.alternate===null&&e(g,_),f=i(N,f,C),k===null?S=N:k.sibling=N,k=N,_=O}if(C===m.length)return n(g,_),K&&Kt(g,C),S;if(_===null){for(;C<m.length;C++)_=h(g,m[C],x),_!==null&&(f=i(_,f,C),k===null?S=_:k.sibling=_,k=_);return K&&Kt(g,C),S}for(_=r(g,_);C<m.length;C++)O=y(_,g,C,m[C],x),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?C:O.key),f=i(O,f,C),k===null?S=O:k.sibling=O,k=O);return t&&_.forEach(function(D){return e(g,D)}),K&&Kt(g,C),S}function w(g,f,m,x){var S=rr(m);if(typeof S!="function")throw Error(j(150));if(m=S.call(m),m==null)throw Error(j(151));for(var k=S=null,_=f,C=f=0,O=null,N=m.next();_!==null&&!N.done;C++,N=m.next()){_.index>C?(O=_,_=null):O=_.sibling;var D=p(g,_,N.value,x);if(D===null){_===null&&(_=O);break}t&&_&&D.alternate===null&&e(g,_),f=i(D,f,C),k===null?S=D:k.sibling=D,k=D,_=O}if(N.done)return n(g,_),K&&Kt(g,C),S;if(_===null){for(;!N.done;C++,N=m.next())N=h(g,N.value,x),N!==null&&(f=i(N,f,C),k===null?S=N:k.sibling=N,k=N);return K&&Kt(g,C),S}for(_=r(g,_);!N.done;C++,N=m.next())N=y(_,g,C,N.value,x),N!==null&&(t&&N.alternate!==null&&_.delete(N.key===null?C:N.key),f=i(N,f,C),k===null?S=N:k.sibling=N,k=N);return t&&_.forEach(function(Ae){return e(g,Ae)}),K&&Kt(g,C),S}function b(g,f,m,x){if(typeof m=="object"&&m!==null&&m.type===bn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ls:e:{for(var S=m.key,k=f;k!==null;){if(k.key===S){if(S=m.type,S===bn){if(k.tag===7){n(g,k.sibling),f=s(k,m.props.children),f.return=g,g=f;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bt&&ou(S)===k.type){n(g,k.sibling),f=s(k,m.props),f.ref=lr(g,k,m),f.return=g,g=f;break e}n(g,k);break}else e(g,k);k=k.sibling}m.type===bn?(f=tn(m.props.children,g.mode,x,m.key),f.return=g,g=f):(x=Ms(m.type,m.key,m.props,null,g.mode,x),x.ref=lr(g,f,m),x.return=g,g=x)}return o(g);case kn:e:{for(k=m.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(g,f.sibling),f=s(f,m.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else e(g,f);f=f.sibling}f=lo(m,g.mode,x),f.return=g,g=f}return o(g);case bt:return k=m._init,b(g,f,k(m._payload),x)}if(fr(m))return v(g,f,m,x);if(rr(m))return w(g,f,m,x);xs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(g,f.sibling),f=s(f,m),f.return=g,g=f):(n(g,f),f=ao(m,g.mode,x),f.return=g,g=f),o(g)):n(g,f)}return b}var Vn=pd(!0),md=pd(!1),Zs=Bt(null),ei=null,On=null,Wa=null;function Ka(){Wa=On=ei=null}function Qa(t){var e=Zs.current;W(Zs),t._currentValue=e}function Ko(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Un(t,e){ei=t,Wa=On=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(be=!0),t.firstContext=null)}function De(t){var e=t._currentValue;if(Wa!==t)if(t={context:t,memoizedValue:e,next:null},On===null){if(ei===null)throw Error(j(308));On=t,ei.dependencies={lanes:0,firstContext:t}}else On=On.next=t;return e}var Xt=null;function Ga(t){Xt===null?Xt=[t]:Xt.push(t)}function gd(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ga(e)):(n.next=s.next,s.next=n),e.interleaved=n,gt(t,r)}function gt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jt=!1;function Ja(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,M&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,gt(t,n)}return s=r.interleaved,s===null?(e.next=e,Ga(r)):(e.next=s.next,s.next=e),r.interleaved=e,gt(t,n)}function As(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$a(t,n)}}function au(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ti(t,e,n,r){var s=t.updateQueue;jt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,l=i;do{var p=l.lane,y=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(p=e,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(y,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(y,h,p):v,p==null)break e;h=Y({},h,p);break e;case 2:jt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=y,u=h):d=d.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);on|=o,t.lanes=o,t.memoizedState=h}}function lu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var ts={},rt=Bt(ts),Br=Bt(ts),Vr=Bt(ts);function Zt(t){if(t===ts)throw Error(j(174));return t}function Ya(t,e){switch(H(Vr,e),H(Br,t),H(rt,ts),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eo(e,t)}W(rt),H(rt,e)}function Hn(){W(rt),W(Br),W(Vr)}function vd(t){Zt(Vr.current);var e=Zt(rt.current),n=Eo(e,t.type);e!==n&&(H(Br,t),H(rt,n))}function Xa(t){Br.current===t&&(W(rt),W(Br))}var G=Bt(0);function ni(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var to=[];function Za(){for(var t=0;t<to.length;t++)to[t]._workInProgressVersionPrimary=null;to.length=0}var zs=vt.ReactCurrentDispatcher,no=vt.ReactCurrentBatchConfig,sn=0,J=null,se=null,oe=null,ri=!1,kr=!1,Hr=0,Bp=0;function de(){throw Error(j(321))}function el(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ye(t[n],e[n]))return!1;return!0}function tl(t,e,n,r,s,i){if(sn=i,J=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zs.current=t===null||t.memoizedState===null?Wp:Kp,t=n(r,s),kr){i=0;do{if(kr=!1,Hr=0,25<=i)throw Error(j(301));i+=1,oe=se=null,e.updateQueue=null,zs.current=Qp,t=n(r,s)}while(kr)}if(zs.current=si,e=se!==null&&se.next!==null,sn=0,oe=se=J=null,ri=!1,e)throw Error(j(300));return t}function nl(){var t=Hr!==0;return Hr=0,t}function Ze(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?J.memoizedState=oe=t:oe=oe.next=t,oe}function Fe(){if(se===null){var t=J.alternate;t=t!==null?t.memoizedState:null}else t=se.next;var e=oe===null?J.memoizedState:oe.next;if(e!==null)oe=e,se=t;else{if(t===null)throw Error(j(310));se=t,t={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},oe===null?J.memoizedState=oe=t:oe=oe.next=t}return oe}function qr(t,e){return typeof e=="function"?e(t):e}function ro(t){var e=Fe(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=se,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((sn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,J.lanes|=d,on|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,Ye(r,e.memoizedState)||(be=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,J.lanes|=i,on|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function so(t){var e=Fe(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ye(i,e.memoizedState)||(be=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function xd(){}function wd(t,e){var n=J,r=Fe(),s=e(),i=!Ye(r.memoizedState,s);if(i&&(r.memoizedState=s,be=!0),r=r.queue,rl(bd.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||oe!==null&&oe.memoizedState.tag&1){if(n.flags|=2048,Wr(9,kd.bind(null,n,r,s,e),void 0,null),ae===null)throw Error(j(349));sn&30||_d(n,e,s)}return s}function _d(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=J.updateQueue,e===null?(e={lastEffect:null,stores:null},J.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kd(t,e,n,r){e.value=n,e.getSnapshot=r,jd(e)&&Sd(t)}function bd(t,e,n){return n(function(){jd(e)&&Sd(t)})}function jd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ye(t,n)}catch{return!0}}function Sd(t){var e=gt(t,1);e!==null&&Je(e,t,1,-1)}function uu(t){var e=Ze();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:t},e.queue=t,t=t.dispatch=qp.bind(null,J,t),[e.memoizedState,t]}function Wr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=J.updateQueue,e===null?(e={lastEffect:null,stores:null},J.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Nd(){return Fe().memoizedState}function $s(t,e,n,r){var s=Ze();J.flags|=t,s.memoizedState=Wr(1|e,n,void 0,r===void 0?null:r)}function ki(t,e,n,r){var s=Fe();r=r===void 0?null:r;var i=void 0;if(se!==null){var o=se.memoizedState;if(i=o.destroy,r!==null&&el(r,o.deps)){s.memoizedState=Wr(e,n,i,r);return}}J.flags|=t,s.memoizedState=Wr(1|e,n,i,r)}function cu(t,e){return $s(8390656,8,t,e)}function rl(t,e){return ki(2048,8,t,e)}function Ed(t,e){return ki(4,2,t,e)}function Cd(t,e){return ki(4,4,t,e)}function Pd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Td(t,e,n){return n=n!=null?n.concat([t]):null,ki(4,4,Pd.bind(null,e,t),n)}function sl(){}function Od(t,e){var n=Fe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&el(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rd(t,e){var n=Fe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&el(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ad(t,e,n){return sn&21?(Ye(n,e)||(n=Uc(),J.lanes|=n,on|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,be=!0),t.memoizedState=n)}function Vp(t,e){var n=B;B=n!==0&&4>n?n:4,t(!0);var r=no.transition;no.transition={};try{t(!1),e()}finally{B=n,no.transition=r}}function zd(){return Fe().memoizedState}function Hp(t,e,n){var r=Lt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$d(t))Ld(e,n);else if(n=gd(t,e,n,r),n!==null){var s=ve();Je(n,t,r,s),Id(n,e,r)}}function qp(t,e,n){var r=Lt(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($d(t))Ld(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ye(l,o)){var u=e.interleaved;u===null?(s.next=s,Ga(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=gd(t,e,s,r),n!==null&&(s=ve(),Je(n,t,r,s),Id(n,e,r))}}function $d(t){var e=t.alternate;return t===J||e!==null&&e===J}function Ld(t,e){kr=ri=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Id(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$a(t,n)}}var si={readContext:De,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useInsertionEffect:de,useLayoutEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useMutableSource:de,useSyncExternalStore:de,useId:de,unstable_isNewReconciler:!1},Wp={readContext:De,useCallback:function(t,e){return Ze().memoizedState=[t,e===void 0?null:e],t},useContext:De,useEffect:cu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$s(4194308,4,Pd.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $s(4194308,4,t,e)},useInsertionEffect:function(t,e){return $s(4,2,t,e)},useMemo:function(t,e){var n=Ze();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ze();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Hp.bind(null,J,t),[r.memoizedState,t]},useRef:function(t){var e=Ze();return t={current:t},e.memoizedState=t},useState:uu,useDebugValue:sl,useDeferredValue:function(t){return Ze().memoizedState=t},useTransition:function(){var t=uu(!1),e=t[0];return t=Vp.bind(null,t[1]),Ze().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=J,s=Ze();if(K){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),ae===null)throw Error(j(349));sn&30||_d(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cu(bd.bind(null,r,i,t),[t]),r.flags|=2048,Wr(9,kd.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ze(),e=ae.identifierPrefix;if(K){var n=ht,r=dt;n=(r&~(1<<32-Ge(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kp={readContext:De,useCallback:Od,useContext:De,useEffect:rl,useImperativeHandle:Td,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Rd,useReducer:ro,useRef:Nd,useState:function(){return ro(qr)},useDebugValue:sl,useDeferredValue:function(t){var e=Fe();return Ad(e,se.memoizedState,t)},useTransition:function(){var t=ro(qr)[0],e=Fe().memoizedState;return[t,e]},useMutableSource:xd,useSyncExternalStore:wd,useId:zd,unstable_isNewReconciler:!1},Qp={readContext:De,useCallback:Od,useContext:De,useEffect:rl,useImperativeHandle:Td,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Rd,useReducer:so,useRef:Nd,useState:function(){return so(qr)},useDebugValue:sl,useDeferredValue:function(t){var e=Fe();return se===null?e.memoizedState=t:Ad(e,se.memoizedState,t)},useTransition:function(){var t=so(qr)[0],e=Fe().memoizedState;return[t,e]},useMutableSource:xd,useSyncExternalStore:wd,useId:zd,unstable_isNewReconciler:!1};function qe(t,e){if(t&&t.defaultProps){e=Y({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qo(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Y({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bi={isMounted:function(t){return(t=t._reactInternals)?un(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ve(),s=Lt(t),i=ft(r,s);i.payload=e,n!=null&&(i.callback=n),e=zt(t,i,s),e!==null&&(Je(e,t,s,r),As(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ve(),s=Lt(t),i=ft(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zt(t,i,s),e!==null&&(Je(e,t,s,r),As(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ve(),r=Lt(t),s=ft(n,r);s.tag=2,e!=null&&(s.callback=e),e=zt(t,s,r),e!==null&&(Je(e,t,r,n),As(e,t,r))}};function du(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ur(n,r)||!Ur(s,i):!0}function Ud(t,e,n){var r=!1,s=Mt,i=e.contextType;return typeof i=="object"&&i!==null?i=De(i):(s=Se(e)?nn:pe.current,r=e.contextTypes,i=(r=r!=null)?Fn(t,s):Mt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bi.enqueueReplaceState(e,e.state,null)}function Go(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ja(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=De(i):(i=Se(e)?nn:pe.current,s.context=Fn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qo(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bi.enqueueReplaceState(s,s.state,null),ti(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function qn(t,e){try{var n="",r=e;do n+=kf(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function io(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gp=typeof WeakMap=="function"?WeakMap:Map;function Md(t,e,n){n=ft(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oi||(oi=!0,oa=r),Jo(t,e)},n}function Dd(t,e,n){n=ft(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Jo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Jo(t,e),typeof r!="function"&&($t===null?$t=new Set([this]):$t.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gp;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=um.bind(null,t,e,n),e.then(t,t))}function pu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ft(-1,1),e.tag=2,zt(n,e,1))),n.lanes|=1),t)}var Jp=vt.ReactCurrentOwner,be=!1;function ye(t,e,n,r){e.child=t===null?md(e,null,n,r):Vn(e,t.child,n,r)}function gu(t,e,n,r,s){n=n.render;var i=e.ref;return Un(e,s),r=tl(t,e,n,r,i,s),n=nl(),t!==null&&!be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yt(t,e,s)):(K&&n&&Va(e),e.flags|=1,ye(t,e,r,s),e.child)}function yu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!hl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Fd(t,e,i,r,s)):(t=Ms(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ur,n(o,r)&&t.ref===e.ref)return yt(t,e,s)}return e.flags|=1,t=It(i,r),t.ref=e.ref,t.return=e,e.child=t}function Fd(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ur(i,r)&&t.ref===e.ref)if(be=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(be=!0);else return e.lanes=t.lanes,yt(t,e,s)}return Yo(t,e,n,r,s)}function Bd(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(An,Ee),Ee|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,H(An,Ee),Ee|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,H(An,Ee),Ee|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,H(An,Ee),Ee|=r;return ye(t,e,s,n),e.child}function Vd(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yo(t,e,n,r,s){var i=Se(n)?nn:pe.current;return i=Fn(e,i),Un(e,s),n=tl(t,e,n,r,i,s),r=nl(),t!==null&&!be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yt(t,e,s)):(K&&r&&Va(e),e.flags|=1,ye(t,e,n,s),e.child)}function vu(t,e,n,r,s){if(Se(n)){var i=!0;Js(e)}else i=!1;if(Un(e,s),e.stateNode===null)Ls(t,e),Ud(e,n,r),Go(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=De(c):(c=Se(n)?nn:pe.current,c=Fn(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&hu(e,o,r,c),jt=!1;var p=e.memoizedState;o.state=p,ti(e,r,o,s),u=e.memoizedState,l!==r||p!==u||je.current||jt?(typeof d=="function"&&(Qo(e,n,d,r),u=e.memoizedState),(l=jt||du(e,n,l,r,p,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yd(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:qe(e.type,l),o.props=c,h=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=De(u):(u=Se(n)?nn:pe.current,u=Fn(e,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==u)&&hu(e,o,r,u),jt=!1,p=e.memoizedState,o.state=p,ti(e,r,o,s);var v=e.memoizedState;l!==h||p!==v||je.current||jt?(typeof y=="function"&&(Qo(e,n,y,r),v=e.memoizedState),(c=jt||du(e,n,c,r,p,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Xo(t,e,n,r,i,s)}function Xo(t,e,n,r,s,i){Vd(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ru(e,n,!1),yt(t,e,i);r=e.stateNode,Jp.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vn(e,t.child,null,i),e.child=Vn(e,null,l,i)):ye(t,e,l,i),e.memoizedState=r.state,s&&ru(e,n,!0),e.child}function Hd(t){var e=t.stateNode;e.pendingContext?nu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nu(t,e.context,!1),Ya(t,e.containerInfo)}function xu(t,e,n,r,s){return Bn(),qa(s),e.flags|=256,ye(t,e,n,r),e.child}var Zo={dehydrated:null,treeContext:null,retryLane:0};function ea(t){return{baseLanes:t,cachePool:null,transitions:null}}function qd(t,e,n){var r=e.pendingProps,s=G.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),H(G,s&1),t===null)return Wo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ni(o,r,0,null),t=tn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ea(n),e.memoizedState=Zo,t):il(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Yp(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=It(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=It(l,i):(i=tn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ea(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zo,r}return i=t.child,t=i.sibling,r=It(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function il(t,e){return e=Ni({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ws(t,e,n,r){return r!==null&&qa(r),Vn(e,t.child,null,n),t=il(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Yp(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=io(Error(j(422))),ws(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ni({mode:"visible",children:r.children},s,0,null),i=tn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vn(e,t.child,null,o),e.child.memoizedState=ea(o),e.memoizedState=Zo,i);if(!(e.mode&1))return ws(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(j(419)),r=io(i,r,void 0),ws(t,e,o,r)}if(l=(o&t.childLanes)!==0,be||l){if(r=ae,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gt(t,s),Je(r,t,s,-1))}return dl(),r=io(Error(j(421))),ws(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cm.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ce=At(s.nextSibling),Pe=e,K=!0,Qe=null,t!==null&&($e[Le++]=dt,$e[Le++]=ht,$e[Le++]=rn,dt=t.id,ht=t.overflow,rn=e),e=il(e,r.children),e.flags|=4096,e)}function wu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ko(t.return,e,n)}function oo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wd(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ye(t,e,r.children,n),r=G.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wu(t,n,e);else if(t.tag===19)wu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(H(G,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ni(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ni(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oo(e,!0,n,null,i);break;case"together":oo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ls(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),on|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=It(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=It(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xp(t,e,n){switch(e.tag){case 3:Hd(e),Bn();break;case 5:vd(e);break;case 1:Se(e.type)&&Js(e);break;case 4:Ya(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;H(Zs,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(H(G,G.current&1),e.flags|=128,null):n&e.child.childLanes?qd(t,e,n):(H(G,G.current&1),t=yt(t,e,n),t!==null?t.sibling:null);H(G,G.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wd(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(G,G.current),r)break;return null;case 22:case 23:return e.lanes=0,Bd(t,e,n)}return yt(t,e,n)}var Kd,ta,Qd,Gd;Kd=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ta=function(){};Qd=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zt(rt.current);var i=null;switch(n){case"input":s=bo(t,s),r=bo(t,r),i=[];break;case"select":s=Y({},s,{value:void 0}),r=Y({},r,{value:void 0}),i=[];break;case"textarea":s=No(t,s),r=No(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qs)}Co(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Or.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Or.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&q("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Gd=function(t,e,n,r){n!==r&&(e.flags|=4)};function ur(t,e){if(!K)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function he(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zp(t,e,n){var r=e.pendingProps;switch(Ha(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(e),null;case 1:return Se(e.type)&&Gs(),he(e),null;case 3:return r=e.stateNode,Hn(),W(je),W(pe),Za(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qe!==null&&(ua(Qe),Qe=null))),ta(t,e),he(e),null;case 5:Xa(e);var s=Zt(Vr.current);if(n=e.type,t!==null&&e.stateNode!=null)Qd(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return he(e),null}if(t=Zt(rt.current),vs(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[tt]=e,r[Fr]=i,t=(e.mode&1)!==0,n){case"dialog":q("cancel",r),q("close",r);break;case"iframe":case"object":case"embed":q("load",r);break;case"video":case"audio":for(s=0;s<mr.length;s++)q(mr[s],r);break;case"source":q("error",r);break;case"img":case"image":case"link":q("error",r),q("load",r);break;case"details":q("toggle",r);break;case"input":Pl(r,i),q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},q("invalid",r);break;case"textarea":Ol(r,i),q("invalid",r)}Co(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ys(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ys(r.textContent,l,t),s=["children",""+l]):Or.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&q("scroll",r)}switch(n){case"input":us(r),Tl(r,i,!0);break;case"textarea":us(r),Rl(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qs)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tt]=e,t[Fr]=r,Kd(t,e,!1,!1),e.stateNode=t;e:{switch(o=Po(n,r),n){case"dialog":q("cancel",t),q("close",t),s=r;break;case"iframe":case"object":case"embed":q("load",t),s=r;break;case"video":case"audio":for(s=0;s<mr.length;s++)q(mr[s],t);s=r;break;case"source":q("error",t),s=r;break;case"img":case"image":case"link":q("error",t),q("load",t),s=r;break;case"details":q("toggle",t),s=r;break;case"input":Pl(t,r),s=bo(t,r),q("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Y({},r,{value:void 0}),q("invalid",t);break;case"textarea":Ol(t,r),s=No(t,r),q("invalid",t);break;default:s=r}Co(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Nc(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jc(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Rr(t,u):typeof u=="number"&&Rr(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Or.hasOwnProperty(i)?u!=null&&i==="onScroll"&&q("scroll",t):u!=null&&Pa(t,i,u,o))}switch(n){case"input":us(t),Tl(t,r,!1);break;case"textarea":us(t),Rl(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ut(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zn(t,!!r.multiple,i,!1):r.defaultValue!=null&&zn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return he(e),null;case 6:if(t&&e.stateNode!=null)Gd(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Zt(Vr.current),Zt(rt.current),vs(e)){if(r=e.stateNode,n=e.memoizedProps,r[tt]=e,(i=r.nodeValue!==n)&&(t=Pe,t!==null))switch(t.tag){case 3:ys(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ys(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tt]=e,e.stateNode=r}return he(e),null;case 13:if(W(G),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(K&&Ce!==null&&e.mode&1&&!(e.flags&128))fd(),Bn(),e.flags|=98560,i=!1;else if(i=vs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[tt]=e}else Bn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;he(e),i=!1}else Qe!==null&&(ua(Qe),Qe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||G.current&1?ie===0&&(ie=3):dl())),e.updateQueue!==null&&(e.flags|=4),he(e),null);case 4:return Hn(),ta(t,e),t===null&&Mr(e.stateNode.containerInfo),he(e),null;case 10:return Qa(e.type._context),he(e),null;case 17:return Se(e.type)&&Gs(),he(e),null;case 19:if(W(G),i=e.memoizedState,i===null)return he(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ur(i,!1);else{if(ie!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ni(t),o!==null){for(e.flags|=128,ur(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return H(G,G.current&1|2),e.child}t=t.sibling}i.tail!==null&&Z()>Wn&&(e.flags|=128,r=!0,ur(i,!1),e.lanes=4194304)}else{if(!r)if(t=ni(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!K)return he(e),null}else 2*Z()-i.renderingStartTime>Wn&&n!==1073741824&&(e.flags|=128,r=!0,ur(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Z(),e.sibling=null,n=G.current,H(G,r?n&1|2:n&1),e):(he(e),null);case 22:case 23:return cl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ee&1073741824&&(he(e),e.subtreeFlags&6&&(e.flags|=8192)):he(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function em(t,e){switch(Ha(e),e.tag){case 1:return Se(e.type)&&Gs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hn(),W(je),W(pe),Za(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xa(e),null;case 13:if(W(G),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Bn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return W(G),null;case 4:return Hn(),null;case 10:return Qa(e.type._context),null;case 22:case 23:return cl(),null;case 24:return null;default:return null}}var _s=!1,fe=!1,tm=typeof WeakSet=="function"?WeakSet:Set,T=null;function Rn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){X(t,e,r)}else n.current=null}function na(t,e,n){try{n()}catch(r){X(t,e,r)}}var _u=!1;function nm(t,e){if(Mo=qs,t=ed(),Ba(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===t)break t;if(p===n&&++c===s&&(l=o),p===i&&++d===r&&(u=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Do={focusedElem:t,selectionRange:n},qs=!1,T=e;T!==null;)if(e=T,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,T=t;else for(;T!==null;){e=T;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:qe(e.type,w),b);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){X(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,T=t;break}T=e.return}return v=_u,_u=!1,v}function br(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&na(e,n,i)}s=s.next}while(s!==r)}}function ji(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ra(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jd(t){var e=t.alternate;e!==null&&(t.alternate=null,Jd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tt],delete e[Fr],delete e[Vo],delete e[Up],delete e[Mp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yd(t){return t.tag===5||t.tag===3||t.tag===4}function ku(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qs));else if(r!==4&&(t=t.child,t!==null))for(sa(t,e,n),t=t.sibling;t!==null;)sa(t,e,n),t=t.sibling}function ia(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ia(t,e,n),t=t.sibling;t!==null;)ia(t,e,n),t=t.sibling}var le=null,We=!1;function wt(t,e,n){for(n=n.child;n!==null;)Xd(t,e,n),n=n.sibling}function Xd(t,e,n){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(gi,n)}catch{}switch(n.tag){case 5:fe||Rn(n,e);case 6:var r=le,s=We;le=null,wt(t,e,n),le=r,We=s,le!==null&&(We?(t=le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):le.removeChild(n.stateNode));break;case 18:le!==null&&(We?(t=le,n=n.stateNode,t.nodeType===8?Zi(t.parentNode,n):t.nodeType===1&&Zi(t,n),Lr(t)):Zi(le,n.stateNode));break;case 4:r=le,s=We,le=n.stateNode.containerInfo,We=!0,wt(t,e,n),le=r,We=s;break;case 0:case 11:case 14:case 15:if(!fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&na(n,e,o),s=s.next}while(s!==r)}wt(t,e,n);break;case 1:if(!fe&&(Rn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){X(n,e,l)}wt(t,e,n);break;case 21:wt(t,e,n);break;case 22:n.mode&1?(fe=(r=fe)||n.memoizedState!==null,wt(t,e,n),fe=r):wt(t,e,n);break;default:wt(t,e,n)}}function bu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tm),e.forEach(function(r){var s=dm.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ve(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:le=l.stateNode,We=!1;break e;case 3:le=l.stateNode.containerInfo,We=!0;break e;case 4:le=l.stateNode.containerInfo,We=!0;break e}l=l.return}if(le===null)throw Error(j(160));Xd(i,o,s),le=null,We=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){X(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zd(e,t),e=e.sibling}function Zd(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ve(e,t),Xe(t),r&4){try{br(3,t,t.return),ji(3,t)}catch(w){X(t,t.return,w)}try{br(5,t,t.return)}catch(w){X(t,t.return,w)}}break;case 1:Ve(e,t),Xe(t),r&512&&n!==null&&Rn(n,n.return);break;case 5:if(Ve(e,t),Xe(t),r&512&&n!==null&&Rn(n,n.return),t.flags&32){var s=t.stateNode;try{Rr(s,"")}catch(w){X(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_c(s,i),Po(l,o);var c=Po(l,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?Nc(s,h):d==="dangerouslySetInnerHTML"?jc(s,h):d==="children"?Rr(s,h):Pa(s,d,h,c)}switch(l){case"input":jo(s,i);break;case"textarea":kc(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?zn(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?zn(s,!!i.multiple,i.defaultValue,!0):zn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fr]=i}catch(w){X(t,t.return,w)}}break;case 6:if(Ve(e,t),Xe(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){X(t,t.return,w)}}break;case 3:if(Ve(e,t),Xe(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lr(e.containerInfo)}catch(w){X(t,t.return,w)}break;case 4:Ve(e,t),Xe(t);break;case 13:Ve(e,t),Xe(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ll=Z())),r&4&&bu(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(fe=(c=fe)||d,Ve(e,t),fe=c):Ve(e,t),Xe(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(T=t,d=t.child;d!==null;){for(h=T=d;T!==null;){switch(p=T,y=p.child,p.tag){case 0:case 11:case 14:case 15:br(4,p,p.return);break;case 1:Rn(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){X(r,n,w)}}break;case 5:Rn(p,p.return);break;case 22:if(p.memoizedState!==null){Su(h);continue}}y!==null?(y.return=p,T=y):Su(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Sc("display",o))}catch(w){X(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){X(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ve(e,t),Xe(t),r&4&&bu(t);break;case 21:break;default:Ve(e,t),Xe(t)}}function Xe(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yd(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rr(s,""),r.flags&=-33);var i=ku(t);ia(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ku(t);sa(t,l,o);break;default:throw Error(j(161))}}catch(u){X(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rm(t,e,n){T=t,eh(t)}function eh(t,e,n){for(var r=(t.mode&1)!==0;T!==null;){var s=T,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_s;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||fe;l=_s;var c=fe;if(_s=o,(fe=u)&&!c)for(T=s;T!==null;)o=T,u=o.child,o.tag===22&&o.memoizedState!==null?Nu(s):u!==null?(u.return=o,T=u):Nu(s);for(;i!==null;)T=i,eh(i),i=i.sibling;T=s,_s=l,fe=c}ju(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,T=i):ju(t)}}function ju(t){for(;T!==null;){var e=T;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fe||ji(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qe(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lu(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lu(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Lr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}fe||e.flags&512&&ra(e)}catch(p){X(e,e.return,p)}}if(e===t){T=null;break}if(n=e.sibling,n!==null){n.return=e.return,T=n;break}T=e.return}}function Su(t){for(;T!==null;){var e=T;if(e===t){T=null;break}var n=e.sibling;if(n!==null){n.return=e.return,T=n;break}T=e.return}}function Nu(t){for(;T!==null;){var e=T;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ji(4,e)}catch(u){X(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){X(e,s,u)}}var i=e.return;try{ra(e)}catch(u){X(e,i,u)}break;case 5:var o=e.return;try{ra(e)}catch(u){X(e,o,u)}}}catch(u){X(e,e.return,u)}if(e===t){T=null;break}var l=e.sibling;if(l!==null){l.return=e.return,T=l;break}T=e.return}}var sm=Math.ceil,ii=vt.ReactCurrentDispatcher,ol=vt.ReactCurrentOwner,Ue=vt.ReactCurrentBatchConfig,M=0,ae=null,te=null,ue=0,Ee=0,An=Bt(0),ie=0,Kr=null,on=0,Si=0,al=0,jr=null,_e=null,ll=0,Wn=1/0,lt=null,oi=!1,oa=null,$t=null,ks=!1,Pt=null,ai=0,Sr=0,aa=null,Is=-1,Us=0;function ve(){return M&6?Z():Is!==-1?Is:Is=Z()}function Lt(t){return t.mode&1?M&2&&ue!==0?ue&-ue:Fp.transition!==null?(Us===0&&(Us=Uc()),Us):(t=B,t!==0||(t=window.event,t=t===void 0?16:qc(t.type)),t):1}function Je(t,e,n,r){if(50<Sr)throw Sr=0,aa=null,Error(j(185));Xr(t,n,r),(!(M&2)||t!==ae)&&(t===ae&&(!(M&2)&&(Si|=n),ie===4&&Nt(t,ue)),Ne(t,r),n===1&&M===0&&!(e.mode&1)&&(Wn=Z()+500,_i&&Vt()))}function Ne(t,e){var n=t.callbackNode;Ff(t,e);var r=Hs(t,t===ae?ue:0);if(r===0)n!==null&&$l(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$l(n),e===1)t.tag===0?Dp(Eu.bind(null,t)):cd(Eu.bind(null,t)),Lp(function(){!(M&6)&&Vt()}),n=null;else{switch(Mc(r)){case 1:n=za;break;case 4:n=Lc;break;case 16:n=Vs;break;case 536870912:n=Ic;break;default:n=Vs}n=lh(n,th.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function th(t,e){if(Is=-1,Us=0,M&6)throw Error(j(327));var n=t.callbackNode;if(Mn()&&t.callbackNode!==n)return null;var r=Hs(t,t===ae?ue:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=li(t,r);else{e=r;var s=M;M|=2;var i=rh();(ae!==t||ue!==e)&&(lt=null,Wn=Z()+500,en(t,e));do try{am();break}catch(l){nh(t,l)}while(!0);Ka(),ii.current=i,M=s,te!==null?e=0:(ae=null,ue=0,e=ie)}if(e!==0){if(e===2&&(s=zo(t),s!==0&&(r=s,e=la(t,s))),e===1)throw n=Kr,en(t,0),Nt(t,r),Ne(t,Z()),n;if(e===6)Nt(t,r);else{if(s=t.current.alternate,!(r&30)&&!im(s)&&(e=li(t,r),e===2&&(i=zo(t),i!==0&&(r=i,e=la(t,i))),e===1))throw n=Kr,en(t,0),Nt(t,r),Ne(t,Z()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Qt(t,_e,lt);break;case 3:if(Nt(t,r),(r&130023424)===r&&(e=ll+500-Z(),10<e)){if(Hs(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ve(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bo(Qt.bind(null,t,_e,lt),e);break}Qt(t,_e,lt);break;case 4:if(Nt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ge(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Z()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sm(r/1960))-r,10<r){t.timeoutHandle=Bo(Qt.bind(null,t,_e,lt),r);break}Qt(t,_e,lt);break;case 5:Qt(t,_e,lt);break;default:throw Error(j(329))}}}return Ne(t,Z()),t.callbackNode===n?th.bind(null,t):null}function la(t,e){var n=jr;return t.current.memoizedState.isDehydrated&&(en(t,e).flags|=256),t=li(t,e),t!==2&&(e=_e,_e=n,e!==null&&ua(e)),t}function ua(t){_e===null?_e=t:_e.push.apply(_e,t)}function im(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ye(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nt(t,e){for(e&=~al,e&=~Si,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ge(e),r=1<<n;t[n]=-1,e&=~r}}function Eu(t){if(M&6)throw Error(j(327));Mn();var e=Hs(t,0);if(!(e&1))return Ne(t,Z()),null;var n=li(t,e);if(t.tag!==0&&n===2){var r=zo(t);r!==0&&(e=r,n=la(t,r))}if(n===1)throw n=Kr,en(t,0),Nt(t,e),Ne(t,Z()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qt(t,_e,lt),Ne(t,Z()),null}function ul(t,e){var n=M;M|=1;try{return t(e)}finally{M=n,M===0&&(Wn=Z()+500,_i&&Vt())}}function an(t){Pt!==null&&Pt.tag===0&&!(M&6)&&Mn();var e=M;M|=1;var n=Ue.transition,r=B;try{if(Ue.transition=null,B=1,t)return t()}finally{B=r,Ue.transition=n,M=e,!(M&6)&&Vt()}}function cl(){Ee=An.current,W(An)}function en(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$p(n)),te!==null)for(n=te.return;n!==null;){var r=n;switch(Ha(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gs();break;case 3:Hn(),W(je),W(pe),Za();break;case 5:Xa(r);break;case 4:Hn();break;case 13:W(G);break;case 19:W(G);break;case 10:Qa(r.type._context);break;case 22:case 23:cl()}n=n.return}if(ae=t,te=t=It(t.current,null),ue=Ee=e,ie=0,Kr=null,al=Si=on=0,_e=jr=null,Xt!==null){for(e=0;e<Xt.length;e++)if(n=Xt[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xt=null}return t}function nh(t,e){do{var n=te;try{if(Ka(),zs.current=si,ri){for(var r=J.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ri=!1}if(sn=0,oe=se=J=null,kr=!1,Hr=0,ol.current=null,n===null||n.return===null){ie=1,Kr=e,te=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ue,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=pu(o);if(y!==null){y.flags&=-257,mu(y,o,l,i,e),y.mode&1&&fu(i,c,e),e=y,u=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){fu(i,c,e),dl();break e}u=Error(j(426))}}else if(K&&l.mode&1){var b=pu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),mu(b,o,l,i,e),qa(qn(u,l));break e}}i=u=qn(u,l),ie!==4&&(ie=2),jr===null?jr=[i]:jr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Md(i,u,e);au(i,g);break e;case 1:l=u;var f=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($t===null||!$t.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Dd(i,l,e);au(i,x);break e}}i=i.return}while(i!==null)}ih(n)}catch(S){e=S,te===n&&n!==null&&(te=n=n.return);continue}break}while(!0)}function rh(){var t=ii.current;return ii.current=si,t===null?si:t}function dl(){(ie===0||ie===3||ie===2)&&(ie=4),ae===null||!(on&268435455)&&!(Si&268435455)||Nt(ae,ue)}function li(t,e){var n=M;M|=2;var r=rh();(ae!==t||ue!==e)&&(lt=null,en(t,e));do try{om();break}catch(s){nh(t,s)}while(!0);if(Ka(),M=n,ii.current=r,te!==null)throw Error(j(261));return ae=null,ue=0,ie}function om(){for(;te!==null;)sh(te)}function am(){for(;te!==null&&!Rf();)sh(te)}function sh(t){var e=ah(t.alternate,t,Ee);t.memoizedProps=t.pendingProps,e===null?ih(t):te=e,ol.current=null}function ih(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=em(n,e),n!==null){n.flags&=32767,te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ie=6,te=null;return}}else if(n=Zp(n,e,Ee),n!==null){te=n;return}if(e=e.sibling,e!==null){te=e;return}te=e=t}while(e!==null);ie===0&&(ie=5)}function Qt(t,e,n){var r=B,s=Ue.transition;try{Ue.transition=null,B=1,lm(t,e,n,r)}finally{Ue.transition=s,B=r}return null}function lm(t,e,n,r){do Mn();while(Pt!==null);if(M&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Bf(t,i),t===ae&&(te=ae=null,ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ks||(ks=!0,lh(Vs,function(){return Mn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ue.transition,Ue.transition=null;var o=B;B=1;var l=M;M|=4,ol.current=null,nm(t,n),Zd(n,t),Cp(Do),qs=!!Mo,Do=Mo=null,t.current=n,rm(n),Af(),M=l,B=o,Ue.transition=i}else t.current=n;if(ks&&(ks=!1,Pt=t,ai=s),i=t.pendingLanes,i===0&&($t=null),Lf(n.stateNode),Ne(t,Z()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(oi)throw oi=!1,t=oa,oa=null,t;return ai&1&&t.tag!==0&&Mn(),i=t.pendingLanes,i&1?t===aa?Sr++:(Sr=0,aa=t):Sr=0,Vt(),null}function Mn(){if(Pt!==null){var t=Mc(ai),e=Ue.transition,n=B;try{if(Ue.transition=null,B=16>t?16:t,Pt===null)var r=!1;else{if(t=Pt,Pt=null,ai=0,M&6)throw Error(j(331));var s=M;for(M|=4,T=t.current;T!==null;){var i=T,o=i.child;if(T.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(T=c;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:br(8,d,i)}var h=d.child;if(h!==null)h.return=d,T=h;else for(;T!==null;){d=T;var p=d.sibling,y=d.return;if(Jd(d),d===c){T=null;break}if(p!==null){p.return=y,T=p;break}T=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}T=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,T=o;else e:for(;T!==null;){if(i=T,i.flags&2048)switch(i.tag){case 0:case 11:case 15:br(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,T=g;break e}T=i.return}}var f=t.current;for(T=f;T!==null;){o=T;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,T=m;else e:for(o=f;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ji(9,l)}}catch(S){X(l,l.return,S)}if(l===o){T=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,T=x;break e}T=l.return}}if(M=s,Vt(),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(gi,t)}catch{}r=!0}return r}finally{B=n,Ue.transition=e}}return!1}function Cu(t,e,n){e=qn(n,e),e=Md(t,e,1),t=zt(t,e,1),e=ve(),t!==null&&(Xr(t,1,e),Ne(t,e))}function X(t,e,n){if(t.tag===3)Cu(t,t,n);else for(;e!==null;){if(e.tag===3){Cu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($t===null||!$t.has(r))){t=qn(n,t),t=Dd(e,t,1),e=zt(e,t,1),t=ve(),e!==null&&(Xr(e,1,t),Ne(e,t));break}}e=e.return}}function um(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ve(),t.pingedLanes|=t.suspendedLanes&n,ae===t&&(ue&n)===n&&(ie===4||ie===3&&(ue&130023424)===ue&&500>Z()-ll?en(t,0):al|=n),Ne(t,e)}function oh(t,e){e===0&&(t.mode&1?(e=hs,hs<<=1,!(hs&130023424)&&(hs=4194304)):e=1);var n=ve();t=gt(t,e),t!==null&&(Xr(t,e,n),Ne(t,n))}function cm(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oh(t,n)}function dm(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),oh(t,n)}var ah;ah=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||je.current)be=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return be=!1,Xp(t,e,n);be=!!(t.flags&131072)}else be=!1,K&&e.flags&1048576&&dd(e,Xs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ls(t,e),t=e.pendingProps;var s=Fn(e,pe.current);Un(e,n),s=tl(null,e,r,t,s,n);var i=nl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Se(r)?(i=!0,Js(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ja(e),s.updater=bi,e.stateNode=s,s._reactInternals=e,Go(e,r,t,n),e=Xo(null,e,r,!0,i,n)):(e.tag=0,K&&i&&Va(e),ye(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ls(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fm(r),t=qe(r,t),s){case 0:e=Yo(null,e,r,t,n);break e;case 1:e=vu(null,e,r,t,n);break e;case 11:e=gu(null,e,r,t,n);break e;case 14:e=yu(null,e,r,qe(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qe(r,s),Yo(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qe(r,s),vu(t,e,r,s,n);case 3:e:{if(Hd(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yd(t,e),ti(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=qn(Error(j(423)),e),e=xu(t,e,r,n,s);break e}else if(r!==s){s=qn(Error(j(424)),e),e=xu(t,e,r,n,s);break e}else for(Ce=At(e.stateNode.containerInfo.firstChild),Pe=e,K=!0,Qe=null,n=md(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bn(),r===s){e=yt(t,e,n);break e}ye(t,e,r,n)}e=e.child}return e;case 5:return vd(e),t===null&&Wo(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fo(r,s)?o=null:i!==null&&Fo(r,i)&&(e.flags|=32),Vd(t,e),ye(t,e,o,n),e.child;case 6:return t===null&&Wo(e),null;case 13:return qd(t,e,n);case 4:return Ya(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vn(e,null,r,n):ye(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qe(r,s),gu(t,e,r,s,n);case 7:return ye(t,e,e.pendingProps,n),e.child;case 8:return ye(t,e,e.pendingProps.children,n),e.child;case 12:return ye(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,H(Zs,r._currentValue),r._currentValue=o,i!==null)if(Ye(i.value,o)){if(i.children===s.children&&!je.current){e=yt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ft(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ko(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ko(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ye(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Un(e,n),s=De(s),r=r(s),e.flags|=1,ye(t,e,r,n),e.child;case 14:return r=e.type,s=qe(r,e.pendingProps),s=qe(r.type,s),yu(t,e,r,s,n);case 15:return Fd(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qe(r,s),Ls(t,e),e.tag=1,Se(r)?(t=!0,Js(e)):t=!1,Un(e,n),Ud(e,r,s),Go(e,r,s,n),Xo(null,e,r,!0,t,n);case 19:return Wd(t,e,n);case 22:return Bd(t,e,n)}throw Error(j(156,e.tag))};function lh(t,e){return $c(t,e)}function hm(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(t,e,n,r){return new hm(t,e,n,r)}function hl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fm(t){if(typeof t=="function")return hl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oa)return 11;if(t===Ra)return 14}return 2}function It(t,e){var n=t.alternate;return n===null?(n=Ie(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ms(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")hl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bn:return tn(n.children,s,i,e);case Ta:o=8,s|=8;break;case xo:return t=Ie(12,n,e,s|2),t.elementType=xo,t.lanes=i,t;case wo:return t=Ie(13,n,e,s),t.elementType=wo,t.lanes=i,t;case _o:return t=Ie(19,n,e,s),t.elementType=_o,t.lanes=i,t;case vc:return Ni(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gc:o=10;break e;case yc:o=9;break e;case Oa:o=11;break e;case Ra:o=14;break e;case bt:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Ie(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function tn(t,e,n,r){return t=Ie(7,t,r,e),t.lanes=n,t}function Ni(t,e,n,r){return t=Ie(22,t,r,e),t.elementType=vc,t.lanes=n,t.stateNode={isHidden:!1},t}function ao(t,e,n){return t=Ie(6,t,null,e),t.lanes=n,t}function lo(t,e,n){return e=Ie(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pm(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fl(t,e,n,r,s,i,o,l,u){return t=new pm(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ie(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ja(i),t}function mm(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uh(t){if(!t)return Mt;t=t._reactInternals;e:{if(un(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Se(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Se(n))return ud(t,n,e)}return e}function ch(t,e,n,r,s,i,o,l,u){return t=fl(n,r,!0,t,s,i,o,l,u),t.context=uh(null),n=t.current,r=ve(),s=Lt(n),i=ft(r,s),i.callback=e??null,zt(n,i,s),t.current.lanes=s,Xr(t,s,r),Ne(t,r),t}function Ei(t,e,n,r){var s=e.current,i=ve(),o=Lt(s);return n=uh(n),e.context===null?e.context=n:e.pendingContext=n,e=ft(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zt(s,e,o),t!==null&&(Je(t,s,o,i),As(t,s,o)),o}function ui(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pl(t,e){Pu(t,e),(t=t.alternate)&&Pu(t,e)}function gm(){return null}var dh=typeof reportError=="function"?reportError:function(t){console.error(t)};function ml(t){this._internalRoot=t}Ci.prototype.render=ml.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Ei(t,e,null,null)};Ci.prototype.unmount=ml.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;an(function(){Ei(null,t,null,null)}),e[mt]=null}};function Ci(t){this._internalRoot=t}Ci.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bc();t={blockedOn:null,target:t,priority:e};for(var n=0;n<St.length&&e!==0&&e<St[n].priority;n++);St.splice(n,0,t),n===0&&Hc(t)}};function gl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tu(){}function ym(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ui(o);i.call(c)}}var o=ch(e,r,t,0,null,!1,!1,"",Tu);return t._reactRootContainer=o,t[mt]=o.current,Mr(t.nodeType===8?t.parentNode:t),an(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=ui(u);l.call(c)}}var u=fl(t,0,!1,null,null,!1,!1,"",Tu);return t._reactRootContainer=u,t[mt]=u.current,Mr(t.nodeType===8?t.parentNode:t),an(function(){Ei(e,u,n,r)}),u}function Ti(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ui(o);l.call(u)}}Ei(e,o,t,s)}else o=ym(n,e,t,s,r);return ui(o)}Dc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pr(e.pendingLanes);n!==0&&($a(e,n|1),Ne(e,Z()),!(M&6)&&(Wn=Z()+500,Vt()))}break;case 13:an(function(){var r=gt(t,1);if(r!==null){var s=ve();Je(r,t,1,s)}}),pl(t,1)}};La=function(t){if(t.tag===13){var e=gt(t,134217728);if(e!==null){var n=ve();Je(e,t,134217728,n)}pl(t,134217728)}};Fc=function(t){if(t.tag===13){var e=Lt(t),n=gt(t,e);if(n!==null){var r=ve();Je(n,t,e,r)}pl(t,e)}};Bc=function(){return B};Vc=function(t,e){var n=B;try{return B=t,e()}finally{B=n}};Oo=function(t,e,n){switch(e){case"input":if(jo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wi(r);if(!s)throw Error(j(90));wc(r),jo(r,s)}}}break;case"textarea":kc(t,n);break;case"select":e=n.value,e!=null&&zn(t,!!n.multiple,e,!1)}};Pc=ul;Tc=an;var vm={usingClientEntryPoint:!1,Events:[es,En,wi,Ec,Cc,ul]},cr={findFiberByHostInstance:Yt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xm={bundleType:cr.bundleType,version:cr.version,rendererPackageName:cr.rendererPackageName,rendererConfig:cr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ac(t),t===null?null:t.stateNode},findFiberByHostInstance:cr.findFiberByHostInstance||gm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bs.isDisabled&&bs.supportsFiber)try{gi=bs.inject(xm),nt=bs}catch{}}Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vm;Oe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gl(e))throw Error(j(200));return mm(t,e,null,n)};Oe.createRoot=function(t,e){if(!gl(t))throw Error(j(299));var n=!1,r="",s=dh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fl(t,1,!1,null,null,n,!1,r,s),t[mt]=e.current,Mr(t.nodeType===8?t.parentNode:t),new ml(e)};Oe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Ac(e),t=t===null?null:t.stateNode,t};Oe.flushSync=function(t){return an(t)};Oe.hydrate=function(t,e,n){if(!Pi(e))throw Error(j(200));return Ti(null,t,e,!0,n)};Oe.hydrateRoot=function(t,e,n){if(!gl(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=dh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ch(e,null,t,1,n??null,s,!1,i,o),t[mt]=e.current,Mr(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ci(e)};Oe.render=function(t,e,n){if(!Pi(e))throw Error(j(200));return Ti(null,t,e,!1,n)};Oe.unmountComponentAtNode=function(t){if(!Pi(t))throw Error(j(40));return t._reactRootContainer?(an(function(){Ti(null,null,t,!1,function(){t._reactRootContainer=null,t[mt]=null})}),!0):!1};Oe.unstable_batchedUpdates=ul;Oe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pi(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Ti(t,e,n,!1,r)};Oe.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(t){console.error(t)}}hh(),hc.exports=Oe;var wm=hc.exports,fh,Ou=wm;fh=Ou.createRoot,Ou.hydrateRoot;const _m="modulepreload",km=function(t){return"/"+t},Ru={},ns=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=km(u),u in Ru)return;Ru[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":_m,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((p,y)=>{h.addEventListener("load",p),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},bm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ns(async()=>{const{default:r}=await Promise.resolve().then(()=>Xn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yl extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jm extends yl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Au extends yl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zu extends yl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ca;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ca||(ca={}));var Sm=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Nm{constructor(e,{headers:n={},customFetch:r,region:s=ca.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=bm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Sm(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(w=>{throw new jm(w)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Au(h);if(!h.ok)throw new zu(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield h.json():y==="application/octet-stream"?v=yield h.blob():y==="text/event-stream"?v=h:y==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof zu||s instanceof Au?s.context:void 0}}})}}var ke={},vl={},Oi={},rs={},Ri={},Ai={},Em=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kn=Em();const Cm=Kn.fetch,ph=Kn.fetch.bind(Kn),mh=Kn.Headers,Pm=Kn.Request,Tm=Kn.Response,Xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:mh,Request:Pm,Response:Tm,default:ph,fetch:Cm},Symbol.toStringTag,{value:"Module"})),Om=Kh(Xn);var zi={};Object.defineProperty(zi,"__esModule",{value:!0});let Rm=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zi.default=Rm;var gh=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ai,"__esModule",{value:!0});const Am=gh(Om),zm=gh(zi);let $m=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Am.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,u,c;let d=null,h=null,p=null,y=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=f:h=JSON.parse(f))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");b&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,y=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,y=200,v="OK")}catch{i.status===404&&b===""?(y=204,v="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,y=200,v="OK"),d&&this.shouldThrowOnError)throw new zm.default(d)}return{error:d,data:h,count:p,status:y,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Ai.default=$m;var Lm=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ri,"__esModule",{value:!0});const Im=Lm(Ai);let Um=class extends Im.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ri.default=Um;var Mm=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rs,"__esModule",{value:!0});const Dm=Mm(Ri);let Fm=class extends Dm.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};rs.default=Fm;var Bm=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oi,"__esModule",{value:!0});const dr=Bm(rs);let Vm=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new dr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new dr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new dr.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new dr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new dr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Oi.default=Vm;var yh=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vl,"__esModule",{value:!0});const Hm=yh(Oi),qm=yh(rs);let Wm=class vh{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Hm.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new vh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{u.searchParams.append(h,p)})):(l="POST",c=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new qm.default({method:l,url:u,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};vl.default=Wm;var Zn=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ke,"__esModule",{value:!0});ke.PostgrestError=ke.PostgrestBuilder=ke.PostgrestTransformBuilder=ke.PostgrestFilterBuilder=ke.PostgrestQueryBuilder=ke.PostgrestClient=void 0;const xh=Zn(vl);ke.PostgrestClient=xh.default;const wh=Zn(Oi);ke.PostgrestQueryBuilder=wh.default;const _h=Zn(rs);ke.PostgrestFilterBuilder=_h.default;const kh=Zn(Ri);ke.PostgrestTransformBuilder=kh.default;const bh=Zn(Ai);ke.PostgrestBuilder=bh.default;const jh=Zn(zi);ke.PostgrestError=jh.default;var Km=ke.default={PostgrestClient:xh.default,PostgrestQueryBuilder:wh.default,PostgrestFilterBuilder:_h.default,PostgrestTransformBuilder:kh.default,PostgrestBuilder:bh.default,PostgrestError:jh.default};const{PostgrestClient:Qm,PostgrestQueryBuilder:Py,PostgrestFilterBuilder:Ty,PostgrestTransformBuilder:Oy,PostgrestBuilder:Ry,PostgrestError:Ay}=Km;class Gm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jm="2.15.5",Ym=`realtime-js/${Jm}`,Xm="1.0.0",da=1e4,Zm=1e3,eg=100;var Nr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nr||(Nr={}));var ne;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ne||(ne={}));var Ke;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ke||(Ke={}));var ha;(function(t){t.websocket="websocket"})(ha||(ha={}));var Jt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jt||(Jt={}));class tg{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Sh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(V||(V={}));const $u=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=ng(o,t,e,s),i),{})},ng=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Nh(i,o):fa(o)},Nh=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return og(e,n)}switch(t){case V.bool:return rg(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return sg(e);case V.json:case V.jsonb:return ig(e);case V.timestamp:return ag(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return fa(e);default:return fa(e)}},fa=t=>t,rg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},sg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ig=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},og=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Nh(e,l))}return t},ag=t=>typeof t=="string"?t.replace(" ","T"):t,Eh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class uo{constructor(e,n,r={},s=da){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Lu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Lu||(Lu={}));class Er{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=Er.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Er.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const p=d.map(b=>b.presence_ref),y=h.map(b=>b.presence_ref),v=d.filter(b=>y.indexOf(b.presence_ref)<0),w=h.filter(b=>p.indexOf(b.presence_ref)<0);v.length>0&&(l[c]=v),w.length>0&&(u[c]=w)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(y=>y.presence_ref),p=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...p)}r(l,d,u)}),this.map(o,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,s(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Iu||(Iu={}));var Cr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cr||(Cr={}));var ut;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class xl{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uo(this,Ke.join,this.params,this.timeout),this.rejoinTimer=new Sh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ne.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ke.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Er(this),this.broadcastEndpointURL=Eh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ne.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Cr.PRESENCE]&&this.bindings[Cr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(ut.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(ut.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){e==null||e(ut.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,g=[];for(let f=0;f<b;f++){const m=w[f],{filter:{event:x,schema:S,table:k,filter:_}}=m,C=y&&y[f];if(C&&C.event===x&&C.schema===S&&C.table===k&&C.filter===_)g.push(Object.assign(Object.assign({},m),{id:C.id}));else{this.unsubscribe(),this.state=ne.errored,e==null||e(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ut.SUBSCRIBED);return}}).receive("error",y=>{this.state=ne.errored,e==null||e(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ne.joined&&e===Cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ne.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ke.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new uo(this,Ke.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ne.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new uo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>eg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ke;if(r&&[l,u,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,b;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=y.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(y=>y.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,w,b,g,f,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const x=y.id,S=(v=y.filter)===null||v===void 0?void 0:v.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(f=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return x==="*"||x===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:w,table:b,commit_timestamp:g,type:f,errors:m}=v;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:f,new:{},old:{},errors:m}),this._getPayloadRecords(v))}y.callback(p,r)})}_isClosed(){return this.state===ne.closed}_isJoined(){return this.state===ne.joined}_isJoining(){return this.state===ne.joining}_isLeaving(){return this.state===ne.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xl.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ke.close,{},e)}_onError(e){this._on(Ke.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ne.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=$u(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=$u(e.columns,e.old_record)),n}}const co=()=>{},js={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lg=[1e3,2e3,5e3,1e4],ug=1e4,cg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dg{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=da,this.transport=null,this.heartbeatIntervalMs=js.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=co,this.ref=0,this.reconnectTimer=null,this.logger=co,this.conn=null,this.sendBuffer=[],this.serializer=new tg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>ns(async()=>{const{default:l}=await Promise.resolve().then(()=>Xn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ha.websocket}`,this.httpEndpoint=Eh(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xm}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nr.connecting:return Jt.Connecting;case Nr.open:return Jt.Open;case Nr.closing:return Jt.Closing;default:return Jt.Closed}}isConnected(){return this.connectionState()===Jt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new xl(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zm,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},js.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ke.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([cg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Ym};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ke.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Sh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},js.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:da,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:js.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:co,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>lg[h-1]||ug,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,p)=>p(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class wl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function re(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hg extends wl{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pa extends wl{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var fg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Ch=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ns(async()=>{const{default:r}=await Promise.resolve().then(()=>Xn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},pg=()=>fg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ns(()=>Promise.resolve().then(()=>Xn),void 0)).Response:Response}),ma=t=>{if(Array.isArray(t))return t.map(n=>ma(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ma(r)}),e},mg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var cn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const ho=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gg=(t,e,n)=>cn(void 0,void 0,void 0,function*(){const r=yield pg();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new hg(ho(s),i,o))}).catch(s=>{e(new pa(ho(s),s))}):e(new pa(ho(t),t))}),yg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(mg(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ss(t,e,n,r,s,i){return cn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,yg(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>gg(u,l,r))})})}function ci(t,e,n,r){return cn(this,void 0,void 0,function*(){return ss(t,"GET",e,n,r)})}function et(t,e,n,r,s){return cn(this,void 0,void 0,function*(){return ss(t,"POST",e,r,s,n)})}function ga(t,e,n,r,s){return cn(this,void 0,void 0,function*(){return ss(t,"PUT",e,r,s,n)})}function vg(t,e,n,r){return cn(this,void 0,void 0,function*(){return ss(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ph(t,e,n,r,s){return cn(this,void 0,void 0,function*(){return ss(t,"DELETE",e,r,s,n)})}var ge=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const xg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wg{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Ch(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return ge(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Uu),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?ga:et)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}upload(e,n,r){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ge(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Uu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield ga(this.fetch,l.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(re(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield et(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new wl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}update(e,n,r){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ge(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ge(this,void 0,void 0,function*(){try{return{data:{path:(yield et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield et(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ge(this,void 0,void 0,function*(){try{const s=yield et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}download(e,n){return ge(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ci(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(re(l))return{data:null,error:l};throw l}})}info(e){return ge(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ci(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ma(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}exists(e){return ge(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield vg(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r)&&r instanceof pa){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return ge(this,void 0,void 0,function*(){try{return{data:yield Ph(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}list(e,n,r){return ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xg),n),{prefix:e||""});return{data:yield et(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}listV2(e,n){return ge(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield et(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const _g="2.12.1",kg={"X-Client-Info":`storage-js/${_g}`};var mn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class bg{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},kg),n),this.fetch=Ch(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mn(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(re(e))return{data:null,error:e};throw e}})}getBucket(e){return mn(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return mn(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return mn(this,void 0,void 0,function*(){try{return{data:yield ga(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}emptyBucket(e){return mn(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}deleteBucket(e){return mn(this,void 0,void 0,function*(){try{return{data:yield Ph(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}}class jg extends bg{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new wg(this.url,this.headers,e,this.fetch)}}const Sg="2.57.4";let gr="";typeof Deno<"u"?gr="deno":typeof document<"u"?gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gr="react-native":gr="node";const Ng={"X-Client-Info":`supabase-js-${gr}/${Sg}`},Eg={headers:Ng},Cg={schema:"public"},Pg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tg={};var Og=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Rg=t=>{let e;return t?e=t:typeof fetch>"u"?e=ph:e=fetch,(...n)=>e(...n)},Ag=()=>typeof Headers>"u"?mh:Headers,zg=(t,e,n)=>{const r=Rg(n),s=Ag();return(i,o)=>Og(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var $g=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function Lg(t){return t.endsWith("/")?t:t+"/"}function Ig(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>$g(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Ug(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Lg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Th="2.71.1",wn=30*1e3,ya=3,fo=ya*wn,Mg="http://localhost:9999",Dg="supabase.auth.token",Fg={"X-Client-Info":`gotrue-js/${Th}`},va="X-Supabase-Api-Version",Oh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vg=10*60*1e3;class _l extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Hg extends _l{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function qg(t){return $(t)&&t.name==="AuthApiError"}class Rh extends _l{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ht extends _l{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class kt extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wg(t){return $(t)&&t.name==="AuthSessionMissingError"}class Ss extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ns extends Ht{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Es extends Ht{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Kg(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class Mu extends Ht{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xa extends Ht{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function po(t){return $(t)&&t.name==="AuthRetryableFetchError"}class Du extends Ht{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class wa extends Ht{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fu=` 	
\r=`.split(""),Qg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Fu.length;e+=1)t[Fu[e].charCodeAt(0)]=-2;for(let e=0;e<di.length;e+=1)t[di[e].charCodeAt(0)]=e;return t})();function Bu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(di[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(di[r]),e.queuedBits-=6}}function Ah(t,e,n){const r=Qg[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Vu(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Yg(o,r,n)};for(let o=0;o<t.length;o+=1)Ah(t.charCodeAt(o),s,i);return e.join("")}function Gg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Jg(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Gg(r,e)}}function Yg(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Xg(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ah(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Zg(t){const e=[];return Jg(t,n=>e.push(n)),new Uint8Array(e)}function e0(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Bu(s,n,r)),Bu(null,n,r),e.join("")}function t0(t){return Math.round(Date.now()/1e3)+t}function n0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const He=()=>typeof window<"u"&&typeof document<"u",qt={tested:!1,writable:!1},zh=()=>{if(!He())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qt.tested)return qt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qt.tested=!0,qt.writable=!0}catch{qt.tested=!0,qt.writable=!1}return qt.writable};function r0(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const $h=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ns(async()=>{const{default:r}=await Promise.resolve().then(()=>Xn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},s0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_n=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wt=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_t=async(t,e)=>{await t.removeItem(e)};class $i{constructor(){this.promise=new $i.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$i.promiseConstructor=Promise;function mo(t){const e=t.split(".");if(e.length!==3)throw new wa("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Bg.test(e[r]))throw new wa("JWT not in base64url format");return{header:JSON.parse(Vu(e[0])),payload:JSON.parse(Vu(e[1])),signature:Xg(e[2]),raw:{header:e[0],payload:e[1]}}}async function i0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function o0(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function a0(t){return("0"+t.toString(16)).substr(-2)}function l0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,a0).join("")}async function u0(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function c0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await u0(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gn(t,e,n=!1){const r=l0();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await _n(t,`${e}-code-verifier`,s);const i=await c0(r);return[i,r===i?"plain":"s256"]}const d0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function h0(t){const e=t.headers.get(va);if(!e||!e.match(d0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function f0(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function p0(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yn(t){if(!m0.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function go(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hu(t){return JSON.parse(JSON.stringify(t))}var g0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Gt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),y0=[502,503,504];async function qu(t){var e;if(!s0(t))throw new xa(Gt(t),0);if(y0.includes(t.status))throw new xa(Gt(t),t.status);let n;try{n=await t.json()}catch(i){throw new Rh(Gt(i),i)}let r;const s=h0(t);if(s&&s.getTime()>=Oh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Du(Gt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new kt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Du(Gt(n),t.status,n.weak_password.reasons);throw new Hg(Gt(n),t.status||500,r)}const v0=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function L(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[va]||(i[va]=Oh["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await x0(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function x0(t,e,n,r,s,i){const o=v0(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(u){throw console.error(u),new xa(Gt(u),0)}if(l.ok||await qu(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await qu(u)}}function at(t){var e;let n=null;b0(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=t0(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Wu(t){const e=at(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Et(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function w0(t){return{data:t,error:null}}function _0(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=g0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function k0(t){return t}function b0(t){return t.access_token&&t.refresh_token&&t.expires_in}const yo=["global","local","others"];var j0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class S0{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=$h(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=yo[0]){if(yo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yo.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=j0(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_0,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Et})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:k0});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){yn(e);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Et})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yn(e);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yn(e);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yn(e.userId);try{const{data:n,error:r}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yn(e.userId),yn(e.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}}function Ku(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function N0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vn={debug:!!(globalThis&&zh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class E0 extends Lh{}async function C0(t,e,n){vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new E0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}N0();const P0={url:Mg,storageKey:Dg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qu(t,e,n){return await n()}const xn={};class Qr{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qr.nextInstanceID,Qr.nextInstanceID+=1,this.instanceID>0&&He()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},P0),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new S0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$h(s.fetch),this.lock=s.lock||Qu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:He()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=C0:this.lock=Qu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:zh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ku(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ku(this.memoryStorage)),He()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=xn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Th}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=r0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),He()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Kg(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $(n)?{error:n}:{error:new Rh("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:at}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:p}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await gn(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:v},xform:at})}else if("phone"in e){const{phone:d,password:h,options:p}=e;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:at})}else throw new Ns("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wu})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wu})}else throw new Ns("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ss}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,l,u,c,d,h,p,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:b,wallet:g,statement:f,options:m}=e;let x;if(He())if(typeof g=="object")x=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))x=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const S=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const k=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),f?{statement:f}:null));let _;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")_=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)_=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const k=await x.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:b,error:g}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:e0(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:at});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ss}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if($(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Wt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:at});if(await _t(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ss}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if($(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:at}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Ss}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await gn(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Ns("You must provide either an email or phone number.")}catch(l){if($(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:at});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await gn(this.storage,this.storageKey)),await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:w0})}catch(i){if($(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new kt;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await L(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await L(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ns("You must provide either an email or phone number and a type")}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Wt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=go()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Et}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Et})})}catch(n){if($(n))return Wg(n)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new kt;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await gn(this.storage,this.storageKey));const{data:c,error:d}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Et});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=mo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if($(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new kt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!He())throw new Es("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Es(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Es("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mu("No code detected.");const{data:f,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=e;if(!i||!l||!o||!c)throw new Es("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;u&&(p=parseInt(u));const y=p-d;y*1e3<=wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=p-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if($(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(qg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=n0(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await gn(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if($(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,u,c,d;const{data:h,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return He()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await o0(async s=>(s>0&&await i0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:at})),(s,i)=>{const o=200*Math.pow(2,s);return i&&po(i)&&Date.now()+o-r<wn})}catch(r){if(this._debug(n,"error",r),$(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),He()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Wt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Wt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await _n(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:go()}else if(s&&!s.user&&!s.user){const o=await Wt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await _t(this.storage,this.storageKey+"-user"),await _n(this.storage,this.storageKey,s)):s.user=go()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fo;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${fo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),po(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $i;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new kt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$(i)){const o={session:null,error:i};return po(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _n(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Hu(s);await _n(this.storage,this.storageKey,i)}else{const s=Hu(n);await _n(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&He()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wn}ms, refresh threshold is ${ya} ticks`),s<=ya&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!He()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await gn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await L(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mo(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Vg>s)return r;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=mo(r);n!=null&&n.allowExpired||f0(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=p0(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Zg(`${l}.${u}`)))throw new wa("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}}Qr.nextInstanceID=0;const T0=Qr;class O0 extends T0{constructor(e){super(e)}}var R0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class A0{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const l=Ug(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Cg,realtime:Tg,auth:Object.assign(Object.assign({},Pg),{storageKey:u}),global:Eg},d=Ig(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=zg(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Qm(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new jg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Nm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return R0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:l,lock:u,debug:c},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new O0({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const z0=(t,e,n)=>new A0(t,e,n);function $0(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const L0="https://cgexzrrokqgjbjvmckdt.supabase.co",I0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnZXh6cnJva3FnamJqdm1ja2R0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MzUwOTMsImV4cCI6MjA3NzUxMTA5M30.gG-Ju9_1hucYk1rn21Ua4tzGWEQVkTQC3OtpkHzFx7U",F=z0(L0,I0),Ih=E.createContext(void 0),er=()=>{const t=E.useContext(Ih);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},U0=({children:t})=>{const[e,n]=E.useState(null),[r,s]=E.useState(!0);E.useEffect(()=>{F.auth.getSession().then(({data:{session:d}})=>{n((d==null?void 0:d.user)??null),s(!1)});const{data:{subscription:c}}=F.auth.onAuthStateChange((d,h)=>{(async()=>n((h==null?void 0:h.user)??null))()});return()=>c.unsubscribe()},[]);const u={user:e,loading:r,signUp:async(c,d,h)=>{const{data:p,error:y}=await F.auth.signUp({email:c,password:d});if(!y&&p.user){const{error:v}=await F.from("profiles").insert([{id:p.user.id,email:c,full_name:h}]);if(v)return{error:v}}return{error:y}},signIn:async(c,d)=>{const{error:h}=await F.auth.signInWithPassword({email:c,password:d});return{error:h}},signOut:async()=>{await F.auth.signOut()}};return a.jsx(Ih.Provider,{value:u,children:t})},M0={appName:{en:"VisaTrack",zh:"VisaTrack",km:"VisaTrack"},appTagline:{en:"Smart Visa Assistant for Cambodia",zh:"",km:""},appDescription:{en:"For global workers, expats, and free travelers",zh:"",km:" "},signIn:{en:"Sign In",zh:"",km:""},signUp:{en:"Sign Up",zh:"",km:""},email:{en:"Email",zh:"",km:""},password:{en:"Password",zh:"",km:""},fullName:{en:"Full Name",zh:"",km:""},signOut:{en:"Sign Out",zh:"",km:""},dashboard:{en:"Dashboard",zh:"",km:""},totalVisas:{en:"Total Visas",zh:"",km:""},activeVisas:{en:"Active Visas",zh:"",km:""},expiringSoon:{en:"Expiring Soon",zh:"",km:""},addVisa:{en:"Add Visa",zh:"",km:""},editVisa:{en:"Edit Visa",zh:"",km:""},country:{en:"Country",zh:"",km:""},visaType:{en:"Visa Type",zh:"",km:""},category:{en:"Category",zh:"",km:""},personal:{en:"Personal",zh:"",km:""},family:{en:"Family",zh:"",km:""},employee:{en:"Employee",zh:"",km:""},personName:{en:"Person Name",zh:"",km:""},relationship:{en:"Relationship",zh:"",km:""},expiryDate:{en:"Expiry Date",zh:"",km:""},issueDate:{en:"Issue Date",zh:"",km:""},visaNumber:{en:"Visa Number",zh:"",km:""},entryType:{en:"Entry Type",zh:"",km:""},singleEntry:{en:"Single Entry",zh:"",km:""},multipleEntry:{en:"Multiple Entry",zh:"",km:""},status:{en:"Status",zh:"",km:""},active:{en:"Active",zh:"",km:""},expired:{en:"Expired",zh:"",km:""},pending:{en:"Pending",zh:"",km:""},cancelled:{en:"Cancelled",zh:"",km:""},notes:{en:"Notes",zh:"",km:""},save:{en:"Save",zh:"",km:""},cancel:{en:"Cancel",zh:"",km:""},delete:{en:"Delete",zh:"",km:""},edit:{en:"Edit",zh:"",km:""},visaEncyclopedia:{en:"Visa Encyclopedia",zh:"",km:""},services:{en:"Services",zh:"",km:""},settings:{en:"Settings",zh:"",km:""},featureAutoRecord:{en:"Auto-record visa & residence information",zh:"",km:""},featureSmartReminder:{en:"Smart expiry calculation and reminders",zh:"",km:""},featureOneClick:{en:"One-click access to agencies & services",zh:"",km:""},featureSecure:{en:"Secure data, avoid fines & overstay risks",zh:"",km:" "},peaceOfMind:{en:"Your visa is no longer a burden, but peace of mind",zh:"",km:""},cambodiaFocus:{en:"Specialized for Cambodia",zh:"",km:""},freePlan:{en:"Free",zh:"",km:""},premiumPlan:{en:"Premium",zh:"",km:""},upgradeToPremium:{en:"Upgrade to Premium",zh:"",km:""},visaLimit:{en:"Visa Limit",zh:"",km:""},visasUsed:{en:"visas",zh:"",km:""},unlimitedVisas:{en:"Unlimited",zh:"",km:""},upgradeMessage:{en:"You have reached the free plan limit. Upgrade to Premium for unlimited visas and more features.",zh:"",km:" "},upgradeNow:{en:"Upgrade Now",zh:"",km:""},maybeLater:{en:"Maybe Later",zh:"",km:""},perMonth:{en:"/month",zh:"/",km:"/"},perYear:{en:"/year",zh:"/",km:"/"},currentPlan:{en:"Current Plan",zh:"",km:""},emailReminders:{en:"Email reminders",zh:"",km:""},allChannels:{en:"Email + SMS + Push",zh:"++",km:"++"},localOnly:{en:"Local storage",zh:"",km:""},cloudBackup:{en:"Cloud backup",zh:"",km:""},manualService:{en:"Manual",zh:"",km:""},oneClickService:{en:"One-click",zh:"",km:""},standardSupport:{en:"Standard",zh:"",km:""},prioritySupport:{en:"Priority",zh:"",km:""},pricingTitle:{en:"Choose Your Plan",zh:"",km:""},pricingSubtitle:{en:"Start free, upgrade when you need more",zh:"",km:""},visa4Message:{en:"Great! 1 slot left. Consider Premium for unlimited.",zh:"1Premium",km:"  "},visa5Message:{en:"Free quota complete! Upgrade to continue.",zh:"",km:"! "},remainingSlots:{en:"remaining",zh:"",km:""},congratsPremium:{en:"Congratulations! You are Premium",zh:"Premium",km:""},premiumActive:{en:"Premium Active",zh:"Premium",km:"Premium "},notifications:{en:"Notifications",zh:"",km:""},language:{en:"Language",zh:"",km:""},tourist:{en:"Tourist",zh:"",km:""},business:{en:"Business",zh:"",km:""},student:{en:"Student",zh:"",km:""},work:{en:"Work",zh:"",km:""},uploadPhoto:{en:"Upload Photo",zh:"",km:""},takePhoto:{en:"Take Photo",zh:"",km:""},capturePhoto:{en:"Capture Photo",zh:"",km:""},visaPhoto:{en:"Visa Photo",zh:"",km:""},smartRecognition:{en:"Smart Visa Recognition",zh:"",km:""},uploadOrCapture:{en:"Upload or capture visa photo for automatic extraction",zh:"",km:""},analyzing:{en:"Analyzing visa...",zh:"...",km:"..."},extracted:{en:"Information extracted!",zh:"",km:"!"},fillManually:{en:"Please fill manually",zh:"",km:""},extractionFailed:{en:"Extraction failed, please fill manually",zh:"",km:" "},extractedInfo:{en:"Extracted Visa Information",zh:"",km:""},confirmInfo:{en:"Please confirm the information below",zh:"",km:""},confirmFill:{en:"Confirm & Fill",zh:"",km:""},manualFill:{en:"Fill Manually",zh:"",km:""},positionVisa:{en:"Position visa page and capture",zh:"",km:""},supported:{en:"Supported",zh:"",km:""},addNewVisa:{en:"Add New Visa",zh:"",km:""},saving:{en:"Saving...",zh:"...",km:"..."},updateVisa:{en:"Update Visa",zh:"",km:""},holderName:{en:"Holder Name",zh:"",km:""},optional:{en:"Optional",zh:"",km:""},required:{en:"Required",zh:"",km:""},loading:{en:"Loading visas...",zh:"...",km:"..."},noVisas:{en:'No visas found. Click "Add Visa" to get started.',zh:'""',km:' "" '},visaManagementSystem:{en:"Smart Visa Assistant",zh:"",km:""},skipToContent:{en:"Skip to main content",zh:"",km:""},goToHome:{en:"Go to home",zh:"",km:""},selectLanguage:{en:"Select language",zh:"",km:""},userMenu:{en:"User menu",zh:"",km:""},help:{en:"Help & Support",zh:"",km:""},closeMenu:{en:"Close menu",zh:"",km:""},openMenu:{en:"Open menu",zh:"",km:""},paymentMethod:{en:"Payment Method",zh:"",km:""},scanQRCode:{en:"Scan QR Code to Pay",zh:"",km:" QR "},monthlyPlan:{en:"Monthly Plan",zh:"",km:""},yearlyPlan:{en:"Yearly Plan",zh:"",km:""},savePercent:{en:"Save 17%",zh:"17%",km:" 17%"},paymentInstructions:{en:"Please scan the QR code with ABA Mobile app to complete the payment",zh:" ABA Mobile ",km:" QR  ABA Mobile "},paymentAmount:{en:"Payment Amount",zh:"",km:""},proceedToPayment:{en:"Proceed to Payment",zh:"",km:""},backToPlans:{en:"Back to Plans",zh:"",km:""},paymentComplete:{en:"After payment, please wait for account upgrade",zh:"",km:" "},contactSupport:{en:"Need help? Contact support",zh:"",km:"? "},payWithABA:{en:"Pay with ABA",zh:" ABA ",km:" ABA"},selectPlan:{en:"Select Plan",zh:"",km:""},confirmPayment:{en:"Confirm Payment",zh:"",km:""},paymentConfirmed:{en:"Payment request submitted! Please wait for admin approval.",zh:"",km:"! "},adminPanel:{en:"Admin Panel",zh:"",km:""},paymentRequests:{en:"Payment Requests",zh:"",km:""},pendingRequests:{en:"Pending Requests",zh:"",km:""},approvedRequests:{en:"Approved",zh:"",km:""},rejectedRequests:{en:"Rejected",zh:"",km:""},approve:{en:"Approve",zh:"",km:""},reject:{en:"Reject",zh:"",km:""},adminNotes:{en:"Admin Notes",zh:"",km:""},requestDate:{en:"Request Date",zh:"",km:""},userName:{en:"User Name",zh:"",km:""},plan:{en:"Plan",zh:"",km:""},amount:{en:"Amount",zh:"",km:""},actions:{en:"Actions",zh:"",km:""},noRequests:{en:"No payment requests",zh:"",km:""},confirmApprove:{en:"Are you sure you want to approve this payment request?",zh:"",km:"?"},confirmReject:{en:"Are you sure you want to reject this payment request?",zh:"",km:"?"},enterNotes:{en:"Enter notes (optional)",zh:"",km:" ()"},submitting:{en:"Submitting...",zh:"...",km:"..."},paymentProof:{en:"Payment Proof",zh:"",km:""}},Uh=E.createContext(void 0),it=()=>{const t=E.useContext(Uh);if(!t)throw new Error("useLanguage must be used within LanguageProvider");return t},D0=({children:t})=>{const[e,n]=E.useState("zh");E.useEffect(()=>{const i=localStorage.getItem("language");i&&["en","zh","km"].includes(i)?n(i):(n("zh"),localStorage.setItem("language","zh"))},[]);const r=i=>{n(i),localStorage.setItem("language",i)},s=i=>{var o;return((o=M0[i])==null?void 0:o[e])||i};return a.jsx(Uh.Provider,{value:{language:e,setLanguage:r,t:s},children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),R=(t,e)=>{const n=E.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...c},d)=>E.createElement("svg",{ref:d,...F0,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${B0(t)}`,l].join(" "),...c},[...e.map(([h,p])=>E.createElement(h,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=R("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=R("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=R("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=R("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=R("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=R("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=R("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=R("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=R("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=R("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=R("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=R("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=R("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=R("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=R("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=R("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=R("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=R("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=R("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=R("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=R("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=R("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=R("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=R("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=R("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=R("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=R("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=R("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=R("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=R("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=R("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=R("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=R("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=R("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=R("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=R("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=R("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=R("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=R("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=R("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=R("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=R("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=R("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=R("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=R("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=R("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=R("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dy=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState(""),[s,i]=E.useState(""),[o,l]=E.useState(""),[u,c]=E.useState(""),[d,h]=E.useState(!1),{signIn:p,signUp:y}=er(),{t:v}=it(),w=async b=>{b.preventDefault(),c(""),h(!0);try{if(t){if(!o.trim()){c("Please enter your full name"),h(!1);return}const{error:g}=await y(n,s,o);g&&c(g.message)}else{const{error:g}=await p(n,s);g&&c(g.message)}}catch(g){c(g.message||"An error occurred")}finally{h(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl mb-4 shadow-lg",children:a.jsx(st,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:v("appName")}),a.jsx("p",{className:"text-lg text-blue-600 font-medium mb-1",children:v("appTagline")}),a.jsx("p",{className:"text-sm text-gray-600",children:v("appDescription")})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"flex gap-2 mb-6",children:[a.jsx("button",{onClick:()=>{e(!1),c("")},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${t?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-blue-600 text-white"}`,children:"Sign In"}),a.jsx("button",{onClick:()=>{e(!0),c("")},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${t?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Sign Up"})]}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"John Doe",required:t})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n,onChange:b=>r(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"you@example.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:s,onChange:b=>i(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",required:!0,minLength:6})]}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),a.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?"Please wait...":t?a.jsxs(a.Fragment,{children:[a.jsx(cy,{className:"w-5 h-5"}),"Create Account"]}):a.jsxs(a.Fragment,{children:[a.jsx(ey,{className:"w-5 h-5"}),"Sign In"]})})]})]}),a.jsxs("div",{className:"mt-8 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-center text-sm font-semibold text-gray-900 mb-4 flex items-center justify-center gap-2",children:[a.jsx("span",{className:"text-blue-600",children:""}),v("cambodiaFocus")]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(st,{className:"w-5 h-5 text-blue-600"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[" ",v("featureAutoRecord")]})})]}),a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(hi,{className:"w-5 h-5 text-green-600"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[" ",v("featureSmartReminder")]})})]}),a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(X0,{className:"w-5 h-5 text-purple-600"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[" ",v("featureOneClick")]})})]}),a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Jr,{className:"w-5 h-5 text-red-600"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[" ",v("featureSecure")]})})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:a.jsx("p",{className:"text-center text-sm text-gray-600 italic",children:v("peaceOfMind")})})]})]})})},hy=({visas:t,onEdit:e,onDelete:n})=>{const[r,s]=E.useState({});E.useEffect(()=>{i()},[t]);const i=async()=>{const d={};for(const h of t)if(h.photo_url){const{data:p}=await F.storage.from("visa-photos").createSignedUrl(h.photo_url,3600);p&&(d[h.id]=p.signedUrl)}s(d)},o=d=>Math.ceil((new Date(d).getTime()-new Date().getTime())/864e5),l=d=>{if(d.status==="expired")return"bg-red-100 text-red-700 border-red-200";const h=o(d.expiry_date);return h<=0?"bg-red-100 text-red-700 border-red-200":h<=30?"bg-orange-100 text-orange-700 border-orange-200":"bg-green-100 text-green-700 border-green-200"},u=d=>{if(d.status==="expired")return"Expired";const h=o(d.expiry_date);return h<=0?"Expired":h<=30?`Expires in ${h} days`:"Active"},c=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(d=>{const h=o(d.expiry_date),p=h<=30&&h>0;return a.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow bg-white",children:[r[d.id]&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:r[d.id],alt:`${d.country} visa`,className:"w-full h-48 object-cover rounded-lg border border-gray-200"})}),a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:d.country}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${l(d)}`,children:u(d)}),d.category!=="personal"&&a.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium capitalize flex items-center gap-1",children:[d.category==="family"?a.jsx(Hh,{className:"w-3 h-3"}):a.jsx(kl,{className:"w-3 h-3"}),d.category]})]}),a.jsxs("p",{className:"text-gray-600 capitalize",children:[d.visa_type," Visa"]}),d.person_name&&a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[a.jsx(pi,{className:"w-3 h-3"}),d.person_name," ",d.relationship&&`(${d.relationship})`]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>e(d),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit visa",children:a.jsx(iy,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>n(d.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete visa",children:a.jsx(ay,{className:"w-5 h-5"})})]})]}),p&&a.jsxs("div",{className:"mb-4 bg-orange-50 border border-orange-200 rounded-lg p-3 flex items-start gap-2",children:[a.jsx(Mh,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),a.jsxs("p",{className:"text-sm text-orange-700",children:["This visa is expiring soon. Please renew it before ",c(d.expiry_date),"."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Bh,{className:"w-4 h-4"}),a.jsxs("span",{children:["Entry Type: ",a.jsx("span",{className:"font-medium text-gray-900 capitalize",children:d.entry_type})]})]}),d.visa_number&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(st,{className:"w-4 h-4"}),a.jsxs("span",{children:["Number: ",a.jsx("span",{className:"font-medium text-gray-900",children:d.visa_number})]})]}),d.issue_date&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(hi,{className:"w-4 h-4"}),a.jsxs("span",{children:["Issued: ",a.jsx("span",{className:"font-medium text-gray-900",children:c(d.issue_date)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(hi,{className:"w-4 h-4"}),a.jsxs("span",{children:["Expires: ",a.jsx("span",{className:"font-medium text-gray-900",children:c(d.expiry_date)})]})]})]}),d.notes&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsx("p",{className:"text-sm text-gray-600",children:d.notes})})]},d.id)})})},fy=({currentPhotoUrl:t,onPhotoSelected:e,onPhotoRemoved:n,onOCRComplete:r})=>{const{t:s}=it(),[i,o]=E.useState(t),[l,u]=E.useState(!1),[c,d]=E.useState(!1),[h,p]=E.useState(""),y=E.useRef(null),v=E.useRef(null),w=E.useRef(null),b=async k=>{d(!0),p(s("analyzing"));try{const _=k.split(",")[1],D=await(await fetch("https://cgexzrrokqgjbjvmckdt.supabase.co/functions/v1/extract-visa-info",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnZXh6cnJva3FnamJqdm1ja2R0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MzUwOTMsImV4cCI6MjA3NzUxMTA5M30.gG-Ju9_1hucYk1rn21Ua4tzGWEQVkTQC3OtpkHzFx7U"},body:JSON.stringify({imageBase64:_})})).json();D.extracted&&D.data?(p(` ${s("extracted")} ${s("confirmInfo")}`),r&&r(D.data)):p(D.message||` ${s("fillManually")}`)}catch(_){console.error("OCR Error:",_),p(` ${s("extractionFailed")}`)}finally{setTimeout(()=>{d(!1),p("")},3e3)}},g=async k=>{var C;const _=(C=k.target.files)==null?void 0:C[0];if(_){if(_.size>5*1024*1024){alert("File size must be less than 5MB");return}if(!_.type.startsWith("image/")){alert("Please select an image file");return}const O=new FileReader;O.onloadend=async()=>{const N=O.result;o(N),e(_),await b(N)},O.readAsDataURL(_)}},f=async()=>{try{const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});v.current&&(v.current.srcObject=k,w.current=k,u(!0))}catch(k){console.error("Camera access error:",k),alert("Unable to access camera. Please check permissions or use file upload instead.")}},m=()=>{w.current&&(w.current.getTracks().forEach(k=>k.stop()),w.current=null),u(!1)},x=()=>{if(v.current){const k=document.createElement("canvas");k.width=v.current.videoWidth,k.height=v.current.videoHeight;const _=k.getContext("2d");_&&(_.drawImage(v.current,0,0),k.toBlob(async C=>{if(C){const O=new File([C],`visa-${Date.now()}.jpg`,{type:"image/jpeg"}),N=k.toDataURL("image/jpeg",.9);o(N),e(O),m(),await b(N)}},"image/jpeg",.9))}},S=()=>{o(null),n(),y.current&&(y.current.value="")};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("visaPhoto")}),i?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:i,alt:"Visa preview",className:"w-full h-64 object-cover rounded-lg border-2 border-gray-300"}),a.jsx("button",{type:"button",onClick:S,className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors shadow-lg",children:a.jsx(Dt,{className:"w-5 h-5"})}),c&&a.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 rounded-lg flex flex-col items-center justify-center gap-3",children:[a.jsx(Z0,{className:"w-8 h-8 text-white animate-spin"}),a.jsx("p",{className:"text-white text-sm font-medium px-4 text-center",children:h})]}),h&&!c&&a.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[a.jsx(Zu,{className:"w-4 h-4 text-blue-600"}),a.jsx("p",{className:"text-sm text-blue-700",children:h})]})]}):l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("video",{ref:v,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover rounded-lg border-2 border-blue-500"}),a.jsx("div",{className:"absolute top-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs p-2 rounded text-center",children:s("positionVisa")})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"button",onClick:x,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx(Gu,{className:"w-5 h-5"}),s("capturePhoto")]}),a.jsx("button",{type:"button",onClick:m,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:s("cancel")})]})]}):a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(J0,{className:"w-12 h-12 text-gray-400"}),a.jsx(Zu,{className:"w-6 h-6 text-blue-500"})]}),a.jsx("p",{className:"text-gray-900 font-semibold mb-1",children:s("smartRecognition")}),a.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:s("uploadOrCapture")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs("button",{type:"button",onClick:()=>{var k;return(k=y.current)==null?void 0:k.click()},className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm",children:[a.jsx(uy,{className:"w-5 h-5"}),s("uploadPhoto")]}),a.jsxs("button",{type:"button",onClick:f,className:"flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:[a.jsx(Gu,{className:"w-5 h-5"}),s("takePhoto")]})]}),a.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:g,className:"hidden"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:[s("supported"),": JPG, PNG, WebP (Max 5MB)"]})]})})]})},py=({visa:t,onClose:e,userId:n})=>{const{t:r}=it(),[s,i]=E.useState({country:"",visa_type:"tourist",visa_number:"",issue_date:"",expiry_date:"",entry_type:"single",status:"active",notes:"",category:"personal",person_name:"",relationship:""}),[o,l]=E.useState(!1),[u,c]=E.useState(""),[d,h]=E.useState(null),[p,y]=E.useState(null),[v,w]=E.useState(null),[b,g]=E.useState(!1);E.useEffect(()=>{t&&(i({country:t.country,visa_type:t.visa_type,visa_number:t.visa_number||"",issue_date:t.issue_date||"",expiry_date:t.expiry_date,entry_type:t.entry_type,status:t.status,notes:t.notes,category:t.category,person_name:t.person_name||"",relationship:t.relationship||""}),t.photo_url&&f(t.photo_url))},[t]);const f=async N=>{const{data:D}=await F.storage.from("visa-photos").createSignedUrl(N,3600);D&&y(D.signedUrl)},m=N=>{w(N),g(!0)},x=()=>{v&&i({...s,country:v.country||s.country,visa_type:v.visa_type||s.visa_type,visa_number:v.visa_number||s.visa_number,issue_date:v.issue_date||s.issue_date,expiry_date:v.expiry_date||s.expiry_date,entry_type:v.entry_type||s.entry_type,person_name:v.person_name||s.person_name}),g(!1),w(null)},S=()=>{g(!1),w(null)},k=async N=>{N.preventDefault(),c(""),l(!0);try{let D=(t==null?void 0:t.photo_url)||null;if(d){const me=d.name.split(".").pop(),xt=`${n}/${Date.now()}.${me}`,{error:ot}=await F.storage.from("visa-photos").upload(xt,d,{cacheControl:"3600",upsert:!1});if(ot)throw ot;t!=null&&t.photo_url&&await F.storage.from("visa-photos").remove([t.photo_url]),D=xt}const Ae={...s,user_id:n,visa_number:s.visa_number||null,issue_date:s.issue_date||null,person_name:s.person_name||null,relationship:s.relationship||null,photo_url:D};if(t){const{error:me}=await F.from("visas").update(Ae).eq("id",t.id);if(me)throw me}else{const{error:me}=await F.from("visas").insert([Ae]);if(me)throw me}e()}catch(D){c(D.message||"An error occurred")}finally{l(!1)}},_=N=>{h(N)},C=async()=>{if(h(null),y(null),t!=null&&t.photo_url)try{await F.storage.from("visa-photos").remove([t.photo_url]),await F.from("visas").update({photo_url:null}).eq("id",t.id)}catch(N){console.error("Error removing photo:",N)}},O=N=>{const{name:D,value:Ae}=N.target;i({...s,[D]:Ae})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full my-8",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center rounded-t-2xl",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r(t?"editVisa":"addNewVisa")}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Dt,{className:"w-6 h-6 text-gray-600"})})]}),a.jsxs("form",{onSubmit:k,className:"p-6 space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:[a.jsx(fy,{currentPhotoUrl:p,onPhotoSelected:_,onPhotoRemoved:C,onOCRComplete:m}),b&&v&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 space-y-4 animate-in slide-in-from-top",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-blue-900",children:r("extractedInfo")}),a.jsx("p",{className:"text-sm text-blue-700",children:r("confirmInfo")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-white rounded-lg p-4",children:[v.country&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("country")}),a.jsx("p",{className:"font-semibold text-gray-900",children:v.country})]}),v.visa_type&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("visaType")}),a.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:v.visa_type})]}),v.visa_number&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("visaNumber")}),a.jsx("p",{className:"font-semibold text-gray-900",children:v.visa_number})]}),v.issue_date&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("issueDate")}),a.jsx("p",{className:"font-semibold text-gray-900",children:v.issue_date})]}),v.expiry_date&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("expiryDate")}),a.jsx("p",{className:"font-semibold text-gray-900",children:v.expiry_date})]}),v.entry_type&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("entryType")}),a.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:v.entry_type})]}),v.person_name&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-xs text-gray-500",children:r("holderName")}),a.jsx("p",{className:"font-semibold text-gray-900",children:v.person_name})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{type:"button",onClick:x,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx(Qn,{className:"w-5 h-5"}),r("confirmFill")]}),a.jsx("button",{type:"button",onClick:S,className:"flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:r("manualFill")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("category")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"category",value:s.category,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"personal",children:r("personal")}),a.jsx("option",{value:"family",children:r("family")}),a.jsx("option",{value:"employee",children:r("employee")})]})]}),s.category!=="personal"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("personName")}),a.jsx("input",{type:"text",name:"person_name",value:s.person_name,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("relationship")}),a.jsx("input",{type:"text",name:"relationship",value:s.relationship,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spouse, Child, Employee"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("country")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"country",value:s.country,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., United States",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("visaType")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"visa_type",value:s.visa_type,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"tourist",children:r("tourist")}),a.jsx("option",{value:"business",children:r("business")}),a.jsx("option",{value:"student",children:r("student")}),a.jsx("option",{value:"work",children:r("work")}),a.jsx("option",{value:"transit",children:r("transit")}),a.jsx("option",{value:"other",children:r("other")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("visaNumber")}),a.jsx("input",{type:"text",name:"visa_number",value:s.visa_number,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:r("optional")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("entryType")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"entry_type",value:s.entry_type,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"single",children:r("singleEntry")}),a.jsx("option",{value:"multiple",children:r("multipleEntry")}),a.jsx("option",{value:"transit",children:r("transit")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("issueDate")}),a.jsx("input",{type:"date",name:"issue_date",value:s.issue_date,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("expiryDate")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"expiry_date",value:s.expiry_date,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("status")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:s.status,onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"active",children:r("active")}),a.jsx("option",{value:"expired",children:r("expired")})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("notes")}),a.jsx("textarea",{name:"notes",value:s.notes,onChange:O,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add any additional notes about this visa..."})]}),u&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[a.jsx(Mh,{className:"w-5 h-5"}),u]}),a.jsxs("div",{className:"flex gap-3 pt-4 sticky bottom-0 bg-white pb-2",children:[a.jsx("button",{type:"button",onClick:e,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:r("cancel")}),a.jsxs("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2",children:[a.jsx(Vh,{className:"w-5 h-5"}),r(o?"saving":t?"updateVisa":"addVisa")]})]})]})]})})},my=({onClose:t})=>{const[e,n]=E.useState([]),[r,s]=E.useState([]),[i,o]=E.useState(!0),[l,u]=E.useState(""),[c,d]=E.useState(null),{language:h,t:p}=it();E.useEffect(()=>{y()},[]),E.useEffect(()=>{if(l){const f=e.filter(m=>v(m).toLowerCase().includes(l.toLowerCase())||m.code.toLowerCase().includes(l.toLowerCase()));s(f)}else s(e)},[l,e]);const y=async()=>{o(!0);const{data:f,error:m}=await F.from("visa_types").select("*").eq("is_active",!0).order("country",{ascending:!0}).order("code",{ascending:!0});!m&&f&&(n(f),s(f)),o(!1)},v=f=>h==="zh"&&f.name_zh?f.name_zh:h==="km"&&f.name_km?f.name_km:f.name_en,w=f=>h==="zh"&&f.description_zh?f.description_zh:h==="km"&&f.description_km?f.description_km:f.description_en,b=f=>h==="zh"&&f.requirements_zh?f.requirements_zh:h==="km"&&f.requirements_km?f.requirements_km:f.requirements_en,g=f=>{let m=f.materials_en;return h==="zh"&&f.materials_zh&&(m=f.materials_zh),h==="km"&&f.materials_km&&(m=f.materials_km),Array.isArray(m)?m:[]};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-6xl w-full h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_a,{className:"w-8 h-8 text-blue-600"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:p("visaEncyclopedia")})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Dt,{className:"w-6 h-6 text-gray-600"})})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-1/3 border-r border-gray-200 overflow-y-auto p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(ry,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),a.jsx("input",{type:"text",value:l,onChange:f=>u(f.target.value),placeholder:"Search visa types...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),i?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):a.jsx("div",{className:"space-y-2",children:r.map(f=>a.jsxs("button",{onClick:()=>d(f),className:`w-full text-left p-4 rounded-lg transition-colors ${(c==null?void 0:c.id)===f.id?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-bold text-blue-600",children:f.code}),a.jsx("span",{className:"text-xs text-gray-500",children:f.country})]}),a.jsx("p",{className:"font-medium text-gray-900",children:v(f)})]},f.id))})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 font-bold rounded-lg",children:c.code}),a.jsx("span",{className:"text-sm text-gray-500",children:c.country})]}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:v(c)})]})}),w(c)&&a.jsx("p",{className:"text-gray-600",children:w(c)})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.duration_days&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[a.jsx(fi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Duration"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[c.duration_days," days"]})]}),c.processing_time_days&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[a.jsx(fi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Processing"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[c.processing_time_days," days"]})]}),c.fee_usd&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[a.jsx(Dh,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Fee"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",c.fee_usd]})]})]}),b(c)&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Requirements"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:b(c)})]}),g(c).length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(st,{className:"w-5 h-5 text-gray-700"}),a.jsx("h4",{className:"font-bold text-gray-900",children:"Required Materials"})]}),a.jsx("ul",{className:"space-y-2",children:g(c).map((f,m)=>a.jsxs("li",{className:"flex items-start gap-2 bg-gray-50 rounded-lg p-3",children:[a.jsx("span",{className:"text-blue-600 font-bold mt-0.5",children:""}),a.jsx("span",{className:"text-gray-700",children:f})]},m))})]})]}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(_a,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("p",{children:"Select a visa type to view details"})]})})})]})]})})},gy=({onClose:t})=>{const[e,n]=E.useState([]),[r,s]=E.useState(!0),[i,o]=E.useState("all"),[l,u]=E.useState(null),[c,d]=E.useState(""),[h,p]=E.useState(!1),{user:y}=er(),{t:v}=it();E.useEffect(()=>{w()},[]);const w=async()=>{s(!0);const{data:x,error:S}=await F.from("service_providers").select("*").eq("is_active",!0).order("is_verified",{ascending:!1}).order("rating",{ascending:!1});!S&&x&&n(x),s(!1)},b=i==="all"?e:e.filter(x=>x.type===i),g=x=>{switch(x){case"visa_agency":return a.jsx(kl,{className:"w-5 h-5"});case"law_firm":return a.jsx(Jr,{className:"w-5 h-5"});case"translation":return a.jsx(Y0,{className:"w-5 h-5"});default:return a.jsx(st,{className:"w-5 h-5"})}},f=x=>{switch(x){case"visa_agency":return"Visa Agency";case"law_firm":return"Law Firm";case"translation":return"Translation Service";default:return x}},m=async()=>{if(!l||!c.trim())return;p(!0);const{error:x}=await F.from("service_requests").insert([{user_id:y.id,provider_id:l.id,service_type:l.type,status:"pending",message:c}]);x?alert("Failed to send request. Please try again."):(alert("Request sent successfully! The provider will contact you soon."),d(""),u(null)),p(!1)};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-6xl w-full h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:v("services")}),a.jsx("p",{className:"text-sm text-gray-600",children:"Connect with verified visa agencies and service providers"})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Dt,{className:"w-6 h-6 text-gray-600"})})]}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All Services"}),a.jsx("button",{onClick:()=>o("visa_agency"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="visa_agency"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Visa Agencies"}),a.jsx("button",{onClick:()=>o("law_firm"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="law_firm"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Law Firms"}),a.jsx("button",{onClick:()=>o("translation"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="translation"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Translation Services"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r?a.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading services..."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.map(x=>a.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow bg-white",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:g(x.type)}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:x.name}),x.is_verified&&a.jsx(Jr,{className:"w-4 h-4 text-blue-600",title:"Verified"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:f(x.type)})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(oy,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),a.jsx("span",{className:"font-medium text-gray-900",children:x.rating.toFixed(1)}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",x.review_count,")"]})]})]}),x.description&&a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:x.description}),a.jsxs("div",{className:"space-y-2 mb-4",children:[x.contact_phone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(ny,{className:"w-4 h-4"}),a.jsx("span",{children:x.contact_phone})]}),x.contact_email&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Fh,{className:"w-4 h-4"}),a.jsx("span",{children:x.contact_email})]}),x.address&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Bh,{className:"w-4 h-4"}),a.jsx("span",{children:x.address})]}),x.website&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(K0,{className:"w-4 h-4"}),a.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Visit Website"})]})]}),a.jsxs("button",{onClick:()=>u(x),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[a.jsx(ka,{className:"w-4 h-4"}),"Contact Provider"]})]},x.id))})})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Contact ",l.name]}),a.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(Dt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message"}),a.jsx("textarea",{value:c,onChange:x=>d(x.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the service you need..."})]}),a.jsx("button",{onClick:m,disabled:!c.trim()||h,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Sending...":"Send Request"})]})]})})]})},yy=({onClose:t})=>{const{user:e}=er(),{t:n}=it(),[r,s]=E.useState(!0),[i,o]=E.useState(!1),[l,u]=E.useState(""),[c,d]=E.useState({notification_email:!0,notification_telegram:!1,notification_wechat:!1,notification_sms:!1,telegram_id:"",wechat_id:"",phone_number:""});E.useEffect(()=>{h()},[]);const h=async()=>{if(!e)return;s(!0);const{data:y,error:v}=await F.from("profiles").select("*").eq("id",e.id).maybeSingle();!v&&y&&d(y),s(!1)},p=async()=>{if(!e)return;o(!0),u("");const{error:y}=await F.from("profiles").update({notification_email:c.notification_email,notification_telegram:c.notification_telegram,notification_wechat:c.notification_wechat,notification_sms:c.notification_sms,telegram_id:c.telegram_id||null,wechat_id:c.wechat_id||null,phone_number:c.phone_number||null}).eq("id",e.id);y?u(""):(u(""),setTimeout(()=>u(""),3e3)),o(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-6 h-6 text-blue-600"}),a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[n("notifications")," ",n("settings")]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Dt,{className:"w-6 h-6 text-gray-600"})})]}),r?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"..."}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-blue-800",children:"73"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Fh,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:""}),a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",e==null?void 0:e.email]})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.notification_email,onChange:y=>d({...c,notification_email:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(ka,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Telegram"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Telegram"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.notification_telegram,onChange:y=>d({...c,notification_telegram:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),c.notification_telegram&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TelegramID"}),a.jsx("input",{type:"text",value:c.telegram_id||"",onChange:y=>d({...c,telegram_id:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"TelegramID"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" /start  @VisaTrackBot ID"})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(ka,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:""}),a.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.notification_wechat,onChange:y=>d({...c,notification_wechat:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),c.notification_wechat&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:c.wechat_id||"",onChange:y=>d({...c,wechat_id:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"OpenID"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"VisaTrack"})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(sy,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:""}),a.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.notification_sms,onChange:y=>d({...c,notification_sms:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),c.notification_sms&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"tel",value:c.phone_number||"",onChange:y=>d({...c,phone_number:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+86 1234567890"})]})]})]}),l&&a.jsx("div",{className:`p-4 rounded-lg ${l.includes("success")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:n("cancel")}),a.jsxs("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2",children:[a.jsx(Vh,{className:"w-5 h-5"}),i?"...":n("save")]})]})]})]})})},vy=({user:t,profile:e,activeTab:n,onTabChange:r,onAddVisa:s,onShowEncyclopedia:i,onShowServices:o,onShowAdmin:l,onShowSettings:u,onSignOut:c,notificationCount:d=0})=>{var k;const{language:h,setLanguage:p,t:y}=it(),v=(e==null?void 0:e.subscription_plan)==="premium",[w,b]=E.useState(!1),[g,f]=E.useState(!1);E.useEffect(()=>{const _=O=>{O.key==="Escape"&&(b(!1),f(!1))},C=O=>{O.target.closest(".user-menu-container")||f(!1)};return document.addEventListener("keydown",_),document.addEventListener("click",C),()=>{document.removeEventListener("keydown",_),document.removeEventListener("click",C)}},[]);const m=(e==null?void 0:e.is_admin)===!0,x=[{id:"dashboard",label:y("dashboard"),icon:G0,action:()=>r("dashboard")},{id:"encyclopedia",label:y("visaEncyclopedia"),icon:_a,action:i,badge:null},{id:"services",label:y("services"),icon:kl,action:o},...m&&l?[{id:"admin",label:y("adminPanel"),icon:Jr,action:l,badge:null}]:[]],S=(_,C)=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),C())};return a.jsxs(a.Fragment,{children:[a.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-lg",children:y("skipToContent")}),a.jsxs("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm",role:"navigation","aria-label":"Main navigation",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("button",{onClick:()=>r("dashboard"),className:"flex items-center gap-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg","aria-label":y("goToHome"),children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(st,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"hidden sm:block",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:y("appName")}),a.jsx("p",{className:"text-xs text-gray-500",children:y("visaManagementSystem")})]})]}),a.jsx("div",{className:"hidden lg:flex items-center gap-1 ml-8",children:x.map(_=>{const C=_.icon,O=n===_.id;return a.jsxs("button",{onClick:_.action,onKeyPress:N=>S(N,_.action),className:`
                        relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all
                        ${O?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                        focus:outline-none focus:ring-2 focus:ring-blue-500
                      `,"aria-current":O?"page":void 0,"aria-label":_.label,children:[a.jsx(C,{className:"w-5 h-5"}),a.jsx("span",{children:_.label}),_.badge&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:_.badge}),O&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},_.id)})})]}),a.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[a.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all shadow-sm hover:shadow-md font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":y("addVisa"),children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden xl:inline",children:y("addVisa")})]}),a.jsxs("button",{onClick:u,className:"relative p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":`${y("notifications")} ${y("settings")}${d>0?` (${d})`:""}`,children:[a.jsx(Gr,{className:"w-5 h-5"}),d>0&&a.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:d>9?"9+":d})]}),a.jsxs("select",{value:h,onChange:_=>p(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hover:border-gray-400 transition-colors cursor-pointer","aria-label":y("selectLanguage"),children:[a.jsx("option",{value:"en",children:" EN"}),a.jsx("option",{value:"zh",children:" "}),a.jsx("option",{value:"km",children:" KM"})]}),a.jsx("div",{className:"h-8 w-px bg-gray-300 mx-2"}),a.jsxs("div",{className:"relative user-menu-container",children:[a.jsxs("button",{onClick:()=>f(!g),className:"flex items-center gap-2 px-3 py-2 hover:bg-gray-50 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":g,"aria-haspopup":"true","aria-label":y("userMenu"),children:[a.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center relative ${v?"bg-gradient-to-br from-blue-600 to-blue-700":"bg-gradient-to-br from-gray-500 to-gray-600"}`,children:[a.jsx(pi,{className:"w-4 h-4 text-white"}),v&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center border-2 border-white",children:a.jsx("span",{className:"text-[8px] font-bold text-gray-900",children:"P"})})]}),a.jsx("span",{className:"text-sm font-medium text-gray-700 max-w-[100px] truncate hidden xl:inline",children:(e==null?void 0:e.full_name)||((k=t==null?void 0:t.email)==null?void 0:k.split("@")[0])}),a.jsx(H0,{className:`w-4 h-4 text-gray-500 transition-transform ${g?"rotate-180":""}`})]}),g&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(e==null?void 0:e.full_name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.email})]}),a.jsxs("button",{onClick:()=>{i(),f(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[a.jsx(Q0,{className:"w-4 h-4"}),y("help")]}),a.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:a.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors font-medium",children:[a.jsx(Xu,{className:"w-4 h-4"}),y("signOut")]})})]})]})]}),a.jsx("button",{onClick:()=>b(!w),className:"lg:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":w,"aria-label":y(w?"closeMenu":"openMenu"),children:w?a.jsx(Dt,{className:"w-6 h-6"}):a.jsx(ty,{className:"w-6 h-6"})})]}),w&&a.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",role:"menu",children:[a.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center",children:a.jsx(pi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(e==null?void 0:e.full_name)||"User"}),a.jsx("p",{className:"text-xs text-gray-600 truncate",children:t==null?void 0:t.email})]})]})}),a.jsxs("button",{onClick:()=>{s(),b(!1)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm",role:"menuitem",children:[a.jsx(Pr,{className:"w-5 h-5"}),y("addVisa")]}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),x.map(_=>{const C=_.icon,O=n===_.id;return a.jsxs("button",{onClick:()=>{_.action(),b(!1)},className:`
                      w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium
                      ${O?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}
                    `,role:"menuitem",children:[a.jsx(C,{className:"w-5 h-5"}),a.jsx("span",{children:_.label}),_.badge&&a.jsx("span",{className:"ml-auto w-6 h-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:_.badge})]},_.id)}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsxs("button",{onClick:()=>{u(),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",role:"menuitem",children:[a.jsx(Gr,{className:"w-5 h-5"}),a.jsxs("span",{className:"font-medium",children:[y("notifications")," ",y("settings")]}),d>0&&a.jsx("span",{className:"ml-auto w-6 h-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:d>9?"9+":d})]}),a.jsxs("select",{value:h,onChange:_=>p(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":y("selectLanguage"),children:[a.jsx("option",{value:"en",children:" English"}),a.jsx("option",{value:"zh",children:" "}),a.jsx("option",{value:"km",children:" "})]}),a.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:a.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors font-medium",role:"menuitem",children:[a.jsx(Xu,{className:"w-5 h-5"}),a.jsx("span",{children:y("signOut")})]})})]})]}),a.jsx("div",{className:"hidden xl:block absolute bottom-full right-8 mb-2 bg-gray-900 text-white text-xs px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Press ? for shortcuts"})]})]})},xy=({onClose:t,currentVisaCount:e})=>{const{t:n}=it(),{user:r}=er(),[s,i]=E.useState("plans"),[o,l]=E.useState("yearly"),[u,c]=E.useState(!1),[d,h]=E.useState(!1),p={free:[{icon:st,text:`5 ${n("visasUsed")}`,available:!0},{icon:Gr,text:n("emailReminders"),available:!0},{icon:q0,text:n("localOnly"),available:!0},{icon:Yu,text:n("standardSupport"),available:!0}],premium:[{icon:Tr,text:n("unlimitedVisas"),available:!0},{icon:Gr,text:n("allChannels"),available:!0},{icon:Jr,text:n("cloudBackup"),available:!0},{icon:Hh,text:n("oneClickService"),available:!0},{icon:Yu,text:n("prioritySupport"),available:!0}]},y={monthly:{amount:4.99,display:"$4.99",period:n("perMonth")},yearly:{amount:49,display:"$49",period:n("perYear"),savings:n("savePercent")}},v=async()=>{if(r){c(!0);try{const{data:g}=await F.from("profiles").select("full_name").eq("id",r.id).maybeSingle(),{error:f}=await F.from("payment_requests").insert({user_id:r.id,email:r.email,full_name:(g==null?void 0:g.full_name)||r.email,plan_type:o,amount:y[o].amount,status:"pending",payment_proof:`ABA Pay - ${y[o].display}`});if(f)throw f;h(!0),setTimeout(()=>{t()},3e3)}catch(g){console.error("Error submitting payment request:",g),alert("Failed to submit payment request. Please try again.")}finally{c(!1)}}},w=()=>d?a.jsx("div",{className:"p-4 md:p-6 h-[calc(90vh-80px)] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Qn,{className:"w-12 h-12 text-green-600"})}),a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:n("confirmPayment")}),a.jsx("p",{className:"text-gray-600",children:n("paymentConfirmed")})]})}):a.jsxs("div",{className:"p-4 md:p-6 h-[calc(90vh-80px)] overflow-hidden flex flex-col",children:[a.jsxs("button",{onClick:()=>i("plans"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-3 md:mb-4 transition-colors flex-shrink-0",children:[a.jsx(V0,{className:"w-4 h-4 md:w-5 md:h-5"}),a.jsx("span",{className:"text-sm md:text-base",children:n("backToPlans")})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden",children:a.jsxs("div",{className:"w-full max-w-2xl grid md:grid-cols-2 gap-4 md:gap-6 items-center",children:[a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:a.jsx(W0,{className:"w-6 h-6 md:w-7 md:h-7 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:n("paymentMethod")}),a.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:n("scanQRCode")})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white border-2 border-blue-200 rounded-xl p-3 md:p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-xs md:text-sm text-gray-600 mb-2",children:n("selectPlan")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l("monthly"),className:`flex-1 px-3 py-1.5 md:py-2 rounded-lg font-medium text-xs md:text-sm transition-all ${o==="monthly"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:border-blue-300"}`,children:n("monthlyPlan")}),a.jsxs("button",{onClick:()=>l("yearly"),className:`flex-1 px-3 py-1.5 md:py-2 rounded-lg font-medium text-xs md:text-sm transition-all relative ${o==="yearly"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:border-blue-300"}`,children:[n("yearlyPlan"),a.jsx("span",{className:"absolute -top-1.5 -right-1.5 md:-top-2 md:-right-2 bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:n("savePercent")})]})]})]}),a.jsxs("div",{className:"text-center py-2 md:py-3 border-t border-blue-100",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:n("paymentAmount")}),a.jsx("div",{className:"text-2xl md:text-3xl font-bold text-blue-600",children:y[o].display}),a.jsx("div",{className:"text-xs text-gray-600",children:y[o].period})]})]}),a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),a.jsxs("div",{className:"text-xs text-gray-700",children:[a.jsx("p",{className:"font-semibold mb-0.5",children:n("paymentInstructions")}),a.jsx("p",{className:"text-gray-600 text-xs",children:n("contactSupport")})]})]})}),a.jsxs("button",{onClick:v,disabled:u,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-2.5 md:py-3 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a.jsx(Qn,{className:"w-4 h-4 md:w-5 md:h-5"}),n(u?"submitting":"confirmPayment")]})]}),a.jsx("div",{className:"bg-white rounded-xl p-3 md:p-4 shadow-lg border-2 border-gray-100",children:a.jsx("img",{src:"/weixin_image_20251215222838_544_56.jpg",alt:"ABA Pay QR Code",className:"w-full rounded-lg"})})]})})]}),b=()=>a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Tr,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 mb-1",children:[e," / 5 ",n("visasUsed")]}),a.jsx("p",{className:"text-sm text-gray-700",children:n("upgradeMessage")})]})]})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n("freePlan")}),a.jsx("div",{className:"text-4xl font-bold text-gray-900",children:"$0"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:n("currentPlan")})]}),a.jsx("ul",{className:"space-y-3",children:p.free.map((g,f)=>(g.icon,a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-5 h-5 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:a.jsx(Ju,{className:"w-3 h-3 text-gray-600"})}),a.jsx("span",{className:"text-sm text-gray-700",children:g.text})]},f)))})]}),a.jsxs("div",{className:"border-2 border-blue-500 rounded-xl p-6 relative bg-gradient-to-br from-blue-50 to-white",children:[a.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:a.jsx("span",{className:"px-4 py-1 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-xs font-bold rounded-full shadow-lg",children:"RECOMMENDED"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n("premiumPlan")}),a.jsxs("div",{className:"flex items-end justify-center gap-2",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-600",children:"$4.99"}),a.jsx("div",{className:"text-gray-600 text-sm pb-1",children:n("perMonth")})]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["or $49",n("perYear")," ",a.jsx("span",{className:"text-green-600 font-semibold",children:"(Save 17%)"})]})]}),a.jsx("ul",{className:"space-y-3 mb-6",children:p.premium.map((g,f)=>(g.icon,a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded flex items-center justify-center flex-shrink-0",children:a.jsx(Ju,{className:"w-3 h-3 text-blue-600"})}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:g.text})]},f)))}),a.jsxs("button",{onClick:()=>i("payment"),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[a.jsx(Tr,{className:"w-5 h-5"}),n("upgradeNow")]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4 text-center",children:n("pricingTitle")}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Feature"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:n("freePlan")}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-blue-600",children:n("premiumPlan")})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:n("visaLimit")}),a.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:"5"}),a.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:n("unlimitedVisas")})]}),a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:n("notifications")}),a.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:n("emailReminders")}),a.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:n("allChannels")})]}),a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Storage"}),a.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:n("localOnly")}),a.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:n("cloudBackup")})]}),a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:n("services")}),a.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:n("manualService")}),a.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:n("oneClickService")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Support"}),a.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:n("standardSupport")}),a.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:n("prioritySupport")})]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:n("maybeLater")})})]});return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n(s==="plans"?"upgradeToPremium":"payWithABA")}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n(s==="plans"?"pricingSubtitle":"scanQRCode")})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:a.jsx(Dt,{className:"w-5 h-5"})})]}),s==="plans"?b():w()]})})},wy=()=>{const{t}=it(),[e,n]=E.useState([]),[r,s]=E.useState("pending"),[i,o]=E.useState(!0);E.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const{data:p,error:y}=await F.from("payment_requests").select("*").order("created_at",{ascending:!1});if(y)throw y;n(p||[])}catch(p){console.error("Error fetching payment requests:",p)}finally{o(!1)}},u=async p=>{const y=prompt(t("enterNotes"));if(y!==null)try{const{error:v}=await F.rpc("approve_payment_request",{p_request_id:p,p_admin_notes:y||null});if(v)throw v;alert("Payment approved successfully!"),l()}catch(v){console.error("Error approving payment:",v),alert("Failed to approve payment. Please try again.")}},c=async p=>{const y=prompt(t("enterNotes"));if(!y){alert("Please provide a reason for rejection.");return}try{const{error:v}=await F.rpc("reject_payment_request",{p_request_id:p,p_admin_notes:y});if(v)throw v;alert("Payment rejected."),l()}catch(v){console.error("Error rejecting payment:",v),alert("Failed to reject payment. Please try again.")}},d=e.filter(p=>p.status===r),h=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t("adminPanel")}),a.jsx("p",{className:"text-gray-600",children:t("paymentRequests")})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-2 p-4",children:[a.jsxs("button",{onClick:()=>s("pending"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${r==="pending"?"bg-orange-100 text-orange-700 border-2 border-orange-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(fi,{className:"w-4 h-4"}),t("pendingRequests"),a.jsx("span",{className:"bg-orange-200 text-orange-800 px-2 py-0.5 rounded-full text-xs font-bold",children:e.filter(p=>p.status==="pending").length})]}),a.jsxs("button",{onClick:()=>s("approved"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${r==="approved"?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(Qn,{className:"w-4 h-4"}),t("approvedRequests"),a.jsx("span",{className:"bg-green-200 text-green-800 px-2 py-0.5 rounded-full text-xs font-bold",children:e.filter(p=>p.status==="approved").length})]}),a.jsxs("button",{onClick:()=>s("rejected"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${r==="rejected"?"bg-red-100 text-red-700 border-2 border-red-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(ec,{className:"w-4 h-4"}),t("rejectedRequests"),a.jsx("span",{className:"bg-red-200 text-red-800 px-2 py-0.5 rounded-full text-xs font-bold",children:e.filter(p=>p.status==="rejected").length})]})]})}),a.jsx("div",{className:"p-4",children:i?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("p",{className:"mt-4 text-gray-600",children:t("loading")})]}):d.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(fi,{className:"w-8 h-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-600",children:t("noRequests")})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"space-y-4",children:d.map(p=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pi,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:p.full_name}),a.jsx("div",{className:"text-sm text-gray-600",children:p.email})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hi,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:h(p.created_at)})]})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dh,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold text-gray-900",children:["$",p.amount]}),a.jsx("div",{className:"text-sm text-gray-600",children:p.plan_type==="monthly"?t("monthlyPlan"):t("yearlyPlan")})]})]})})]}),p.admin_notes&&a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[t("adminNotes"),":"]}),a.jsx("div",{className:"text-sm text-gray-600",children:p.admin_notes})]}),p.status==="pending"&&a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsxs("button",{onClick:()=>u(p.id),className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[a.jsx(Qn,{className:"w-4 h-4"}),t("approve")]}),a.jsxs("button",{onClick:()=>c(p.id),className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[a.jsx(ec,{className:"w-4 h-4"}),t("reject")]})]})]},p.id))})})})]})]})})},_y=()=>{const{user:t,signOut:e}=er(),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(!1),[u,c]=E.useState(null),[d,h]=E.useState(null),[p,y]=E.useState(!1),[v,w]=E.useState(!1),[b,g]=E.useState(!1),[f,m]=E.useState(!1),[x,S]=E.useState(!1),[k,_]=E.useState("all"),[C,O]=E.useState("dashboard"),{t:N}=it(),D=(d==null?void 0:d.subscription_plan)==="premium",Ae=D||n.length<5;E.useEffect(()=>{me(),xt()},[t]);const me=async()=>{if(!t)return;const{data:U}=await F.from("profiles").select("full_name, subscription_plan, visa_count, is_admin").eq("id",t.id).maybeSingle();U&&h(U)},xt=async()=>{if(!t)return;i(!0);const{data:U,error:ze}=await F.from("visas").select("*").eq("user_id",t.id).order("expiry_date",{ascending:!0});!ze&&U&&r(U),i(!1)},ot=()=>{if(!Ae){m(!0);return}c(null),l(!0)},tr=U=>{c(U),l(!0)},nr=async U=>{if(!confirm("Are you sure you want to delete this visa?"))return;const{error:ze}=await F.from("visas").delete().eq("id",U);ze||r(n.filter(Be=>Be.id!==U))},P=async()=>{l(!1),c(null),await xt(),await z()},z=async()=>{if(t)for(const U of n){const ze=new Date(U.expiry_date),Be=new Date,hn=[{days:7,type:"7days"},{days:3,type:"3days"},{days:0,type:"same_day"}];for(const is of hn){const os=new Date(ze);if(os.setDate(os.getDate()-is.days),os>=Be){const{data:qh}=await F.from("reminders").select("id").eq("visa_id",U.id).eq("days_before",is.days).maybeSingle();if(!qh){const Li=["email"],{data:fn}=await F.from("profiles").select("notification_telegram, notification_wechat").eq("id",t.id).maybeSingle();fn!=null&&fn.notification_telegram&&Li.push("telegram"),fn!=null&&fn.notification_wechat&&Li.push("wechat");for(const Wh of Li)await F.from("reminders").insert([{visa_id:U.id,user_id:t.id,reminder_date:os.toISOString().split("T")[0],days_before:is.days,reminder_type:is.type,channel:Wh,is_sent:!1}])}}}}},A=k==="all"?n:n.filter(U=>U.category===k),Q=A.filter(U=>U.status==="active");A.filter(U=>U.status==="expired");const ee=A.filter(U=>{if(U.status!=="active")return!1;const ze=Math.ceil((new Date(U.expiry_date).getTime()-new Date().getTime())/(1e3*60*60*24));return ze<=30&&ze>0}),dn=U=>{O(U),U==="encyclopedia"?y(!0):U==="services"?w(!0):U==="admin"&&S(!0)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50",children:[a.jsx(vy,{user:t,profile:d,activeTab:C,onTabChange:dn,onAddVisa:ot,onShowEncyclopedia:()=>{O("encyclopedia"),y(!0)},onShowServices:()=>{O("services"),w(!0)},onShowAdmin:()=>{O("admin"),S(!0)},onShowSettings:()=>g(!0),onSignOut:e,notificationCount:0}),a.jsxs("main",{id:"main-content",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[n.length===0&&a.jsx("div",{className:"mb-6 lg:mb-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-lg p-6 sm:p-8 text-white",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center flex-shrink-0",children:a.jsx(st,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:N("appTagline")}),a.jsx("p",{className:"text-blue-100 mb-4",children:N("appDescription")}),a.jsxs("button",{onClick:ot,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-medium shadow-lg",children:[a.jsx(Pr,{className:"w-5 h-5"}),N("addVisa")]})]})]})}),!D&&n.length>=3&&a.jsxs("div",{className:`mb-6 lg:mb-8 rounded-xl p-4 sm:p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 ${n.length>=5?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":n.length===4?"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-orange-300":"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${n.length>=5?"bg-white/20":n.length===4?"bg-orange-200":"bg-blue-200"}`,children:a.jsx(ly,{className:`w-6 h-6 ${n.length>=5?"text-white":n.length===4?"text-orange-600":"text-blue-600"}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsxs("span",{className:`font-bold text-lg ${n.length>=5?"text-white":n.length===4?"text-orange-900":"text-gray-900"}`,children:[n.length," / 5 ",N("visasUsed")]}),n.length>=5&&a.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded text-xs font-semibold animate-pulse",children:N("visaLimit")}),n.length===4&&a.jsxs("span",{className:"px-2 py-0.5 bg-orange-200 text-orange-900 rounded text-xs font-semibold",children:["1 ",N("remainingSlots")]})]}),a.jsx("p",{className:`text-sm ${n.length>=5?"text-white/90":n.length===4?"text-orange-800":"text-gray-700"}`,children:n.length>=5?N("visa5Message"):n.length===4?N("visa4Message"):`${5-n.length} ${N("remainingSlots")}`})]})]}),n.length>=4&&a.jsxs("button",{onClick:()=>m(!0),className:`flex-shrink-0 px-4 py-2 sm:px-5 sm:py-2.5 rounded-lg font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg ${n.length>=5?"bg-white text-orange-600 hover:bg-orange-50 animate-pulse":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800"}`,children:[a.jsx(Tr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:N("upgradeToPremium")}),a.jsx("span",{className:"sm:hidden",children:N("upgradeNow")})]})]}),D&&a.jsxs("div",{className:"mb-6 lg:mb-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4 sm:p-5 flex items-center gap-4 text-white",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:a.jsx(Tr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-bold text-lg",children:N("premiumPlan")}),a.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded text-xs font-semibold",children:"ACTIVE"})]}),a.jsxs("p",{className:"text-sm text-blue-100",children:[N("unlimitedVisas"),"  ",N("allChannels"),"  ",N("cloudBackup")]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 lg:mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 sm:p-6 border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 font-medium",children:N("totalVisas")}),a.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:n.length})]}),a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center",children:a.jsx(st,{className:"w-6 h-6 sm:w-7 sm:h-7 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 sm:p-6 border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 font-medium",children:N("activeVisas")}),a.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:Q.length})]}),a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center",children:a.jsx("div",{className:"w-4 h-4 bg-green-600 rounded-full"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 sm:p-6 border border-gray-200 hover:shadow-md transition-shadow sm:col-span-2 lg:col-span-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 font-medium",children:N("expiringSoon")}),a.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-orange-600",children:ee.length})]}),a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex items-center justify-center",children:a.jsx("div",{className:"w-4 h-4 bg-orange-600 rounded-full animate-pulse"})})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:N("dashboard")}),a.jsxs("button",{onClick:ot,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-sm hover:shadow-md font-medium",children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("span",{children:N("addVisa")})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>_("all"),className:`px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${k==="all"?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N("all")}),a.jsx("button",{onClick:()=>_("personal"),className:`px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${k==="personal"?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N("personal")}),a.jsx("button",{onClick:()=>_("family"),className:`px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${k==="family"?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N("family")}),a.jsx("button",{onClick:()=>_("employee"),className:`px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${k==="employee"?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N("employee")})]})]})}),a.jsx("div",{className:"p-6",children:s?a.jsx("div",{className:"text-center py-12 text-gray-500",children:N("loading")}):A.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(st,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:N("noVisas")}),a.jsxs("button",{onClick:ot,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Pr,{className:"w-5 h-5"}),N("addVisa")]})]}):a.jsx(hy,{visas:A,onEdit:tr,onDelete:nr})})]})]}),o&&a.jsx(py,{visa:u,onClose:P,userId:t.id}),p&&a.jsx(my,{onClose:()=>{y(!1),O("dashboard")}}),v&&a.jsx(gy,{onClose:()=>{w(!1),O("dashboard")}}),b&&a.jsx(yy,{onClose:()=>g(!1)}),f&&a.jsx(xy,{onClose:()=>m(!1),currentVisaCount:n.length}),x&&(d==null?void 0:d.is_admin)&&a.jsx("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:a.jsxs("div",{className:"min-h-screen",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between z-10",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:N("adminPanel")}),a.jsx("button",{onClick:()=>{S(!1),O("dashboard")},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:N("cancel")})]}),a.jsx(wy,{})]})})]})};function ky(){const{user:t,loading:e}=er();return e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?a.jsx(_y,{}):a.jsx(dy,{})}function by(){return a.jsx(D0,{children:a.jsx(U0,{children:a.jsx(ky,{})})})}fh(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(by,{})}));
