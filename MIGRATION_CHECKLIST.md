# 🎯 项目迁移检查清单

快速追踪您的迁移进度

---

## ✅ 准备阶段

- [ ] 阅读完整的 `MIGRATION_GUIDE.md`
- [ ] 备份当前项目数据
- [ ] 准备好 GitHub 账户
- [ ] 准备好新的 bolt.new 账户
- [ ] 确认是否需要保留用户数据

---

## 📦 第一步：代码迁移

- [ ] 运行 `bash setup-git.sh` 初始化 Git
- [ ] 在 GitHub 创建新仓库
- [ ] 添加 GitHub 远程仓库
  ```bash
  git remote add origin https://github.com/YOUR_USERNAME/REPO_NAME.git
  ```
- [ ] 推送代码到 GitHub
  ```bash
  git push -u origin main
  ```
- [ ] 验证 GitHub 仓库内容完整

---

## 🆕 第二步：新账户设置

- [ ] 登录新的 bolt.new 账户
- [ ] 选择 "Import from GitHub"
- [ ] 授权 GitHub 访问
- [ ] 选择正确的仓库
- [ ] 等待 bolt.new 自动设置完成

---

## 🗄️ 第三步：数据库迁移

### 自动完成（无需操作）
- [ ] 数据库迁移脚本自动运行
- [ ] 所有表结构自动创建
- [ ] RLS 策略自动配置
- [ ] Storage buckets 自动创建

### 需要手动操作（如果保留用户数据）
- [ ] 导出原项目用户认证信息
  - 进入原 Supabase Dashboard
  - Authentication → Users → Export
- [ ] 导入用户到新项目
  - 进入新 Supabase Dashboard
  - Authentication → Users → Import
- [ ] 导入业务数据
  - 打开新项目 SQL Editor
  - 运行 `migration-data-export.sql`
- [ ] 验证数据导入成功
  ```sql
  SELECT COUNT(*) FROM profiles;  -- 2
  SELECT COUNT(*) FROM visas;     -- 6
  SELECT COUNT(*) FROM subscriptions;  -- 2
  ```

---

## 🚀 第四步：Edge Functions 部署

### 自动完成（无需操作）
- [ ] `extract-visa-info` 函数自动部署
- [ ] `send-reminders` 函数自动部署

### 验证
- [ ] 在 Supabase Dashboard 查看 Edge Functions 状态
- [ ] 测试 OCR 功能
- [ ] 测试提醒功能

---

## 📁 第五步：文件迁移（可选）

如果有用户上传的签证图片：

- [ ] 从原项目下载 Storage 文件
  - Storage → visa-documents → 下载所有文件
- [ ] 上传到新项目
  - Storage → visa-documents → 上传文件

---

## 🧪 第六步：功能测试

### 认证功能
- [ ] 用户注册
- [ ] 用户登录
- [ ] 密码重置
- [ ] 退出登录

### 签证管理
- [ ] 添加新签证
- [ ] 查看签证列表
- [ ] 编辑签证信息
- [ ] 删除签证
- [ ] 上传签证照片
- [ ] OCR 自动识别

### 订阅系统
- [ ] 查看当前订阅状态
- [ ] 提交支付请求
- [ ] 管理员审批支付
- [ ] 升级到高级版成功

### 提醒功能
- [ ] 设置签证到期提醒
- [ ] 接收提醒通知
- [ ] 多渠道通知（邮件/Telegram）

### 多语言
- [ ] 切换到中文
- [ ] 切换到英文
- [ ] 切换到高棉语

### 管理员功能
- [ ] 访问管理面板
- [ ] 查看所有用户
- [ ] 审批支付请求
- [ ] 查看统计数据

---

## 🔐 第七步：安全检查

### 环境变量
- [ ] `.env` 文件配置正确
- [ ] Supabase URL 正确
- [ ] Supabase Anon Key 正确
- [ ] 不包含旧项目的密钥

### 数据库安全
- [ ] 所有表启用 RLS
- [ ] 测试未授权访问被阻止
- [ ] 用户只能访问自己的数据
- [ ] 管理员权限正确设置

### Storage 安全
- [ ] 文件上传权限正确
- [ ] 文件访问权限正确
- [ ] 用户只能访问自己的文件

### Edge Functions
- [ ] CORS 配置正确
- [ ] 函数正常响应
- [ ] 错误处理完善

---

## 🎨 第八步：前端验证

- [ ] 页面正常加载
- [ ] 样式显示正确
- [ ] 响应式设计正常
- [ ] 移动端显示正常
- [ ] 图片加载正常

---

## 📊 第九步：性能测试

- [ ] 页面加载速度 < 2 秒
- [ ] API 响应时间 < 500ms
- [ ] 图片上传成功
- [ ] OCR 处理时间合理
- [ ] 无控制台错误

---

## 🧹 第十步：清理工作

### 在新项目
- [ ] 删除不需要的测试数据
- [ ] 设置定期备份
- [ ] 配置自定义域名（可选）
- [ ] 设置监控告警

### 在原项目（建议保留 7-30 天）
- [ ] 标记为"旧版本"
- [ ] 导出最终数据备份
- [ ] 确认新项目稳定后再删除

---

## 📝 第十一步：文档更新

- [ ] 更新 README.md（如需要）
- [ ] 更新项目文档
- [ ] 记录迁移日期和版本
- [ ] 通知团队成员（如有）

---

## 🎉 迁移完成！

所有项目都已勾选？恭喜！您的签证管理系统已成功迁移到新账户。

### 后续建议

- 🔄 设置自动备份计划
- 📊 监控系统运行状态
- 🔔 配置告警通知
- 📈 收集用户反馈
- 🛠️ 定期更新依赖包

---

## 🆘 遇到问题？

如果迁移过程中遇到问题：

1. 查看 `MIGRATION_GUIDE.md` 的常见问题部分
2. 检查 Supabase Dashboard 的错误日志
3. 查看浏览器控制台错误
4. 检查 Edge Functions 日志

---

**迁移日期**: ___________________

**迁移人员**: ___________________

**项目版本**: 1.0

**备注**: ___________________
